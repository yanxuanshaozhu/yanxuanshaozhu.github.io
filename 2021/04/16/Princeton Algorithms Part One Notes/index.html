<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yanxuanshaozhu.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Course Name: Algorithms, Part I   Course Website: Coursera  Instructor: Professor Kevin Wayne, Professor Robert Sedgewick   Books: Algorithms(4th edition)">
<meta property="og:type" content="article">
<meta property="og:title" content="Princeton Algorithms Part One Notes">
<meta property="og:url" content="https://yanxuanshaozhu.github.io/2021/04/16/Princeton%20Algorithms%20Part%20One%20Notes/index.html">
<meta property="og:site_name" content="My Blog">
<meta property="og:description" content="Course Name: Algorithms, Part I   Course Website: Coursera  Instructor: Professor Kevin Wayne, Professor Robert Sedgewick   Books: Algorithms(4th edition)">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/CourseStructure.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/UFPerformance.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/PathCompression1.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/PathCompression2.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/UFSummary.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/Percolation.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/ThresholdPercolation.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/Stability.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/SortSummary.png">
<meta property="article:published_time" content="2021-04-16T13:12:53.000Z">
<meta property="article:modified_time" content="2021-05-02T06:46:26.049Z">
<meta property="article:author" content="Yanxuanshaozhu">
<meta property="article:tag" content="Algorithm Part One">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yanxuanshaozhu.github.io/images/Algorithm/CourseStructure.png">

<link rel="canonical" href="https://yanxuanshaozhu.github.io/2021/04/16/Princeton%20Algorithms%20Part%20One%20Notes/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Princeton Algorithms Part One Notes | My Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">My Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">15</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yanxuanshaozhu.github.io/2021/04/16/Princeton%20Algorithms%20Part%20One%20Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanxuanshaozhu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Princeton Algorithms Part One Notes
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-04-16 21:12:53" itemprop="dateCreated datePublished" datetime="2021-04-16T21:12:53+08:00">2021-04-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-02 14:46:26" itemprop="dateModified" datetime="2021-05-02T14:46:26+08:00">2021-05-02</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/" itemprop="url" rel="index"><span itemprop="name">Computer Science</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>35k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>32 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p style="text-align:left; font-weight:bold;">
Course Name: Algorithms, Part I
</p>
<p><a style="text-align:left; font-weight:bold;" target="_blank" rel="noopener" href="https://www.coursera.org/learn/algorithms-part1"> Course Website: Coursera</a></p>
<p style="text-align:left; font-weight:bold;">
Instructor: Professor Kevin Wayne, Professor Robert Sedgewick
</p>
<p style="text-align:left; font-weight:bold;">
Books: Algorithms(4th edition)
</p>
<a id="more"></a>
<h1 id="week-1">Week 1</h1>
<ol type="1">
<li>Introduction
<ul>
<li>Course Structure: <img src="/images/Algorithm/CourseStructure.png"></li>
</ul></li>
<li>Analysis of Algorithms
<ul>
<li>Introduction
<ul>
<li>Running time is the key concern</li>
<li>Reasons to analyze algorithms:
<ul>
<li>Predict performance</li>
<li>Compare algorithms</li>
<li>Provide guarantees</li>
<li>Understand theoretical basis</li>
</ul></li>
<li>Scientific method applied to analysis of algorithms
<ul>
<li>observe =&gt; hypothesize =&gt; predict =&gt; verify =&gt; validate</li>
<li>Experiments must be reproducible, hypotheses must be falsifiable</li>
</ul></li>
</ul></li>
<li>Observations
<ul>
<li>Use plots to analyze algorithms:
<ul>
<li>Standard plot: <code>(problem size N, running time T(n))</code></li>
<li>Log-log plot: <code>(lgN, lgT(N))</code></li>
</ul></li>
<li>Factors affecting algorithm performance
<ul>
<li>System independent effects: algorithm, input</li>
<li>System dependent effects: hardware, software, system</li>
</ul></li>
</ul></li>
<li>Mathematical Models
<ul>
<li>Total running time: sum of cost * frequency for all operations</li>
<li>Simplification
<ul>
<li>Cost model: use some basic operation as a proxy for running time</li>
<li>Tilde notation: estimate running time as a function of input size N, and ignore lower order terms <span class="math display">\[1 + 2 + ... + N  = \sum_{i = 1}^{N} i  \sim \int_{x = 1}^{N} xdx \sim  \frac{1}{2}N^{2}\]</span> <span class="math display">\[1 + \frac{1}{2} + ... + \frac{1}{N}  = \sum_{i = 1}^{N} \frac{1}{i}  \sim \int_{x = 1}^{N} \frac{1}{x}dx \sim  lnN\]</span> <span class="math display">\[\sum_{i = 1}^{N}\sum_{j = 1}^{N}\sum_{k = 1}^{N} 1  \sim \int_{x = 1}^{N} \int_{y = 1}^{N}\int_{z = 1}^{N}dxdydz \sim \frac{1}{6}N^{3}\]</span></li>
</ul></li>
<li>In general, $T_{N} = c_{1}A +c_{1}A + c_{2}B + c_{3}C + c_{4}D + c_{5}E $, where A = array access, B = integer add, C = integer compare, D = increment, E = variable assignment</li>
</ul></li>
<li>Order of Growth Classification
<ul>
<li>Order-of-growth of typical algorithms: <span class="math inline">\(1(constant)\)</span>, <span class="math inline">\(logN(logarithmic)\)</span>, <span class="math inline">\(N(linear)\)</span>, <span class="math inline">\(NlogN(linearithmic)\)</span>, <span class="math inline">\(n^{2}(quadratic)\)</span>, <span class="math inline">\(N^{3}(cubic)\)</span>, <span class="math inline">\(2^{N}(exponential)\)</span></li>
</ul></li>
<li>Theory of Algorithms
<ul>
<li>Types of analyses
<ul>
<li>Best case: lower bound on cost, determined by easiest input, provides a goal for all inputs</li>
<li>Worst case: upper bound on cost, determined by most difficult input, provides a guarantee for all inputs</li>
<li>Average case: expected cost for random input, need a model for random input, provides a way to predict performance</li>
</ul></li>
<li>Theory of algorithms
<ul>
<li>Goals: establish difficulty of a problem, develop optimal algorithms</li>
<li>Approach: suppress details in analysis, eliminate variability in input by focusing on the worst case</li>
<li>Optimal algorithm: performance guarantee for any input, no algorithm can provide a better performance guarantee</li>
<li>Commonly-used notations:
<ul>
<li>Big Theta: asymptotic order of growth, <span class="math inline">\(\Theta(f(N))\)</span></li>
<li>Big Oh: <span class="math inline">\(\Theta(f(N))\)</span> and smaller, <span class="math inline">\(O(f(N))\)</span></li>
<li>Big Omega: <span class="math inline">\(\Theta(f(N))\)</span> and larger, <span class="math inline">\(\Omega(f(N))\)</span></li>
</ul></li>
</ul></li>
</ul></li>
<li>Memory
<ul>
<li>Basics
<ul>
<li>Bit: 0,1; byte: 8 bits; MB: 1million or <span class="math inline">\(2^{30}\)</span> bytes; GB: 1 billion or <span class="math inline">\(2^{30}\)</span> bytes</li>
<li>Old machine: a 32-bit machine with 4 byte pointers</li>
<li>Modern machine: a 64-bit machine with 8 byte pointers</li>
</ul></li>
<li>Object memory usage:
<ul>
<li>boolean: 1 byte; byte: 1 byte; char: 2 bytes; int: 4 bytes; float: 4 bytes; long: 8 bytes; double: 8 bytes</li>
<li>One-dimensional arrays: char[]: 2N + 24 bytes; int[]: 4N + 24 bytes; double[]: 8N + 24 bytes</li>
<li>Two-dimensional arrays: char[][]: ~ 2MN bytes; int[][]: ~ 4MN bytes; double[][]: ~ 8MN bytes</li>
<li>Object overhead: 16 bytes</li>
<li>Reference: 8 bytes</li>
<li>Padding: each object uses a multiple of 8 bytes</li>
</ul></li>
</ul></li>
</ul></li>
<li>Union Find
<ul>
<li>Dynamic Connectivity
<ul>
<li>Problem description
<ul>
<li>Given a set of N objects, we can union two objects by connecting them. Two objects are connected if there is a path through which you can travel from one point to another. What we want to know is that given two objects in the set, whether they are connected or not.</li>
</ul></li>
<li>Application: pixels in a digital photo, computers in a network, friends in a social network, variable names in a program, etc.</li>
<li>Equivalence relation of the connectivity:
<ul>
<li>Reflexive: p is connected to p</li>
<li>Symmetric: if p is connected to q, then q is connected to p</li>
<li>Transitive: if p is connected to q, and q is connected to r, then p is connected to r</li>
</ul></li>
<li>Connected components: maximal set of objects that are mutually connected</li>
</ul></li>
<li>Quick Find
<ul>
<li>It's an eager algorithm to solve the dynamic connectivity problem</li>
<li>Data structure description
<ul>
<li>The data structure is an integer array <code>id[]</code> of size N， each entry is the id that represents the connected component to which this point belongs</li>
<li>Connected command: if two points have the same id, then they are connected</li>
<li>Union command: when union point <code>p</code> to point <code>q</code>, change all elements whose id equals to <code>id[p]</code> to <code>id[q]</code></li>
</ul></li>
<li>Algorithm <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickFindUF</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">QuickFindUF</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    id = <span class="keyword">new</span> <span class="keyword">int</span>[N];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id[p] == id[q];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> idp = id[p];</span><br><span class="line">    <span class="keyword">int</span> idq = id[q];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (id[i] == idp) &#123;</span><br><span class="line">        id[i] = idq;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Performance analysis: N union objects on N objects takes quadratic time, which is quite unbearable fo large datasets</li>
</ul></li>
<li>Quick Union
<ul>
<li>It's a lazy approach to solve the dynamic connectivity problem</li>
<li>Data structure description
<ul>
<li>The data structure is an integer array <code>id[]</code> of size N, each entry is the id that represents the parent point of the current point. All points construct a forest containing connected trees and unconnected leaves</li>
<li>Root of the tree containing point <code>i</code> is <code>id[id[id[...id[i]...]]]</code></li>
<li>Connected command: if two points have the same root, then they are connected</li>
<li>Union command: when union point <code>p</code> to point <code>q</code>, set the parent of p's root be q's root</li>
</ul></li>
<li>Algorithm <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickUnionUF</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span>[] id;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">QuickUnionUF</span><span class="params">(<span class="keyword">int</span> N)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      id[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(node != id[node]) &#123;</span><br><span class="line">      node = id[node];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">connected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> root(p) == root(q);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> rootp = root(p);</span><br><span class="line">    <span class="keyword">int</span> rootq = root(q);</span><br><span class="line">    id[rootp] = rootq;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Performance analysis: trees can be too tall, then find command can be slow since it's a linear operation</li>
</ul></li>
<li>Quick Union Improvement
<ul>
<li>Improvement 1: Weighting
<ul>
<li>Keep track of size of each tree, and balance by linking root of smaller tree to root of larger tree in union command. When there are equal size trees, put the former tree under the latter tree</li>
<li>Data structure description: same as quick union, but maintain extra array <code>size[i]</code> to count number of objects in the tree rooted at <code>i</code></li>
<li>Find command: identical to quick union</li>
<li>Union link root of smaller tree to root of larger tree, update the size[] array <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">union</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> rootp = root(p);</span><br><span class="line">  <span class="keyword">int</span> rootq = root(q);</span><br><span class="line">  <span class="keyword">if</span> (size(rootp) &lt;= size(rootq)) &#123;</span><br><span class="line">    id[rootp] = rootq;</span><br><span class="line">    size[rootq] += size[rootp];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    id[rootq] = rootp;</span><br><span class="line">    size[rootp] += size[rootq];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Theorem: depth of any node x is at most lgN</li>
<li>Performance analysis <img src="/images/Algorithm/UFPerformance.png"></li>
</ul></li>
<li>Improvement 2: Path Compression
<ul>
<li>Idea: after computing the root of p, set the id of each examined node to point to that root, so that the tree is flattened <img src="/images/Algorithm/PathCompression1.png"> Convert the above tree into the following one <img src="/images/Algorithm/PathCompression2.png"></li>
<li>Java implementation
<ul>
<li>Two-pass implementation: add a second loop to <code>root()</code> to set the <code>id[]</code> of each examined node to the root</li>
<li>Simpler one-pass variant: make every other node in path point to its grandparent <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">root</span><span class="params">(<span class="keyword">int</span> node)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (node != id[node]) &#123;</span><br><span class="line">    id[node] = id[id[node]];</span><br><span class="line">    node = id[node];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>Theorem: starting from an empty data structure, any sequence of M union-find operations on N objects makes <span class="math inline">\(\leq c(N + M lgN)\)</span> array accesses. Actually there is no linear algorithm for the union find problem</li>
</ul></li>
<li>Summary <img src="/images/Algorithm/UFSummary.png"></li>
</ul></li>
<li>Union Find Application
<ul>
<li>There are many applications for the union find problem</li>
<li>Percolation
<ul>
<li>It's a model for many physical systems</li>
<li>There is N-by-N grid of sites, each site is open with probability <span class="math inline">\(p\)</span> or blocked with probability <span class="math inline">\(1 - p\)</span>. The system percolates iff the top and bottom are connected by open sites <img src="/images/Algorithm/Percolation.png"></li>
<li>Likelihood of percolation
<ul>
<li><p>When N is large, theory guarantees a sharp threshold <span class="math inline">\(p^{*}\)</span></p>
<p>If <span class="math inline">\(p \ge p^{*}\)</span>: almost certainly percolates</p>
<p>If <span class="math inline">\(p \le p^{*}\)</span>: almost certainly does not percolate <img src="/images/Algorithm/ThresholdPercolation.png"></p></li>
<li><p>No analytical solution of <span class="math inline">\(p^{*}\)</span> could be found, but it could be estimated using Monte Carlo simulation</p>
<ol type="1">
<li>Initialize N-by-N whole grid to be blocked</li>
<li>Declare random sites open until top connected to bottom</li>
<li>Vacancy percentage estimates <span class="math inline">\(p^{*}\)</span></li>
</ol></li>
<li><p>We can use dynamic connectivity to estimate the percolation threshold. For <span class="math inline">\(N = 100\)</span>, the estimated <span class="math inline">\(p^{*} \approx 0.592746\)</span></p></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ol>
<h1 id="week-2">Week 2</h1>
<ol type="1">
<li>Stacks and Queues
<ul>
<li>Fundamental data types:
<ul>
<li>Value: collection of objects</li>
<li>Operations: insert, remove, iterate, test if empty</li>
<li>Stack: LIFO, insert is called push, remove is called pop</li>
<li>Queue: FIFO, insert is called enqueue, remove is called dequeue</li>
<li>Module programming: completely separate interface and implementation</li>
</ul></li>
<li>Stack
<ul>
<li>Stack API <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StackOfStrings</span> </span>&#123;</span><br><span class="line">  StackOfStrings() </span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span></span></span><br><span class="line"><span class="function">  String <span class="title">pop</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>LinkedList Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListStack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Node first = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    String item;</span><br><span class="line">    Node next;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String item = first.item;</span><br><span class="line">    first = first.next;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">    Node oldFirst = first;</span><br><span class="line">    first = <span class="keyword">new</span> Node();</span><br><span class="line">    first.item = item;</span><br><span class="line">    first.next = oldFirst;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> first == <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Every operation takes constant time in the worst case</li>
</ul></li>
<li>Array Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String[] items;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ArrayStack</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    items = <span class="keyword">new</span> String[capacity];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> N ==<span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">    items[N++] = item;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* Loitering</span></span><br><span class="line"><span class="comment">  public String pop() &#123;</span></span><br><span class="line"><span class="comment">    return items[--N];</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String item = items[--N];</span><br><span class="line">    items[N] = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> item; </span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Don't address underflow(pop with an empty stack) and overflow(push with a full stack)</li>
<li>Loitering: holding a reference to an object when it is no longer needed</li>
</ul></li>
</ul></li>
<li>Resizing Arrays
<ul>
<li><p>First try: change size by 1 for push and pop</p>
<ul>
<li>It's too expensive, you need to copy all items to the new array. In order to insert <span class="math inline">\(N\)</span> items into an empty stack, it costs <span class="math inline">\(N^2\)</span> time(To insert into a full stack with <span class="math inline">\(k\)</span> size, you need to create a <span class="math inline">\(k + 1\)</span> array and copy all items, so that's <span class="math inline">\(1 + ... + N \sim N^2\)</span>)</li>
</ul></li>
<li><p>Repeated doubling: double array size when full, halve array size when one-quarterfull <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String[] items = <span class="keyword">new</span> String[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">private</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (N == items.length) &#123;</span><br><span class="line">      resize(<span class="number">2</span> * items.length);</span><br><span class="line">    &#125;</span><br><span class="line">    items[N++] = item;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String item = items[--N];</span><br><span class="line">    items[N] = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span>  (N &gt; <span class="number">0</span> &amp;&amp; N == items.length /<span class="number">4</span>) &#123;</span><br><span class="line">      resize(items.length / <span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    String[] copy = <span class="keyword">new</span> String[capacity];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      copy[i] = items[i];</span><br><span class="line">    &#125;</span><br><span class="line">    items = copy;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>To insert N items into an empty array, it costs <span class="math inline">\(N + 2 + 4 + ... + N \sim 3N\)</span></li>
<li>Amortized analysis: average running time per operation over a worst-case sequence of operations</li>
<li>Starting from an empty stack, any sequence of <span class="math inline">\(M\)</span> push and pop operations takes time proportional to <span class="math inline">\(M\)</span></li>
<li>LinkedList v.s. resizing array for stack implementation
<ul>
<li>LinkedList: every operation takes constant time in the worst case, use extra time and space to deal with the links</li>
<li>Resizing-array: every operation takes constant amortized time, less wasted space</li>
</ul></li>
</ul></li>
</ul></li>
<li>Queues
<ul>
<li>Queue API <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QueueOfStrings</span> </span>&#123;</span><br><span class="line">  QueueOfStrings()</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span></span></span><br><span class="line"><span class="function">  String <span class="title">dequeue</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span></span><br><span class="line"><span class="function">  <span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>LinkedList Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListQueue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Node first;</span><br><span class="line"> <span class="keyword">private</span> Node last;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    String item;</span><br><span class="line">    Node next;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String item = first.item;</span><br><span class="line">    first = first.next;</span><br><span class="line">    <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">      last = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">    Node oldLast = last;</span><br><span class="line">    last = <span class="keyword">new</span> Node();</span><br><span class="line">    last.item = item;</span><br><span class="line">    last.next = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> (isEmpty()) &#123;</span><br><span class="line">      first = last;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      oldLast.next = last;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> first == <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Resizing Array Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayQueue</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> String[] items = <span class="keyword">new</span> String[<span class="number">1</span>];</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> front = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> rear = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(String item)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rear - front == items.length) &#123;</span><br><span class="line">      resize(<span class="number">2</span> * items.length);</span><br><span class="line">    &#125;</span><br><span class="line">    items[rear] = item;</span><br><span class="line">    rear += <span class="number">1</span>;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String item = items[front];</span><br><span class="line">    items[front] = <span class="keyword">null</span>;</span><br><span class="line">    front += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> ( rear - front &gt; <span class="number">0</span> &amp;&amp; rear - front == items.length / <span class="number">4</span>) &#123;</span><br><span class="line">      resize(items.length / <span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">resize</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    String[] copy = <span class="keyword">new</span> String[capacity];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; rear - front; i++) &#123;</span><br><span class="line">      copy[i] = items[front + i];</span><br><span class="line">    &#125;</span><br><span class="line">    items = copy;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>Generics
<ul>
<li>Collections that can contain various types data
<ul>
<li>Implement a separate collection class for each type: tedious</li>
<li>Implement a collection for object type and use type casting like: Object variable = new Object(); T target = (T) variable</li>
<li>Implement a collection with generics: avoid casting when using collections, discover type mismatch errors at compile-time rather than run-time</li>
</ul></li>
<li>LinkedList Stack with Generics <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListStackGeneric</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Node first = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    T item;</span><br><span class="line">    Node next;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">    Node oldFirst = first;</span><br><span class="line">    first = <span class="keyword">new</span> Node();</span><br><span class="line">    first.item = item;</span><br><span class="line">    first.next = oldFirst;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    T item = first.item;</span><br><span class="line">    first = first.next;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> first == <span class="keyword">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ArrayStack with Generics <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStackGeneric</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> T[] items;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ArrayStackGeneric</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// It&#x27;s not allowed in java to create generic arrays, you need type casting here</span></span><br><span class="line">    s = (T[]) <span class="keyword">new</span> Object[capacity];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> N ==<span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(T item)</span> </span>&#123;</span><br><span class="line">    items[N++] = item;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> T <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    T item = items[--N];</span><br><span class="line">    items[N] = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">return</span> item;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Autoboxing
<ul>
<li>For each primitive type there is a wrapper object type, automatic cast ca be done between primitive type and wrapper type</li>
<li>You need to use wrapper types rather than primitive types in collections</li>
<li>Convert from String to other type: <code>int aInt = Integer.parseInt("aString");</code></li>
</ul></li>
</ul></li>
</ul></li>
<li>Iterators
<ul>
<li>Java supports iteration over stack items by client, without revealing the internal representation of the collections</li>
<li>Iterable: a interface that has a method that returns an Iterator <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function">Iterator&lt;Item&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Iterator: an interface that has methods <code>hasNext()</code> and <code>next()</code> <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Iterator</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function">Item <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Java supports elegant enhanced-for loop with iterable data structures <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(String element: stack) &#123;</span><br><span class="line">  System.out.println(element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>LinkedList Stack with Iterator <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">      </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListStack</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="function"><span class="keyword">public</span> Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ListIterator();</span><br><span class="line">  &#125;</span><br><span class="line">      </span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ListIterator</span> <span class="keyword">implements</span> <span class="title">java</span>.<span class="title">util</span>.<span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Node current = first;</span><br><span class="line">        </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> current != <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      T item = current.item;</span><br><span class="line">      current = current.next;</span><br><span class="line">      <span class="keyword">return</span> item;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Array List Stack with Iterator <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayStack</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> Iterator&lt;T&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> ArrayIterator();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ArrayIterator</span> <span class="keyword">implements</span> <span class="title">Iterator</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> i = N;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> i &gt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> items[--i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Bag
<ul>
<li>Application: adding items to a collection and iterating, order doesn't matter</li>
<li>Bag API <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bag</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  Bag();</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(T item)</span></span>;</span><br><span class="line">  <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">  <span class="function">Iterable&lt;T&gt; <span class="title">iterator</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Stack and Queue Applications
<ul>
<li>Java collections library
<ul>
<li>List
<ul>
<li>List interface: <code>java.util.List: public interface List&lt;E&gt; extends Collection&lt;E&gt;</code></li>
<li>Implementations: <code>java.util.ArrayList: public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</code>, <code>java.util.LinkedList: public class LinkedList&lt;E&gt; extends AbstractSequentialList&lt;E&gt; implements List&lt;E&gt;, Deque&lt;E&gt;, Cloneable, java.io.Serializable</code></li>
</ul></li>
<li>Stack: <code>java.util.Stack: public class Stack&lt;E&gt; extends Vector&lt;E&gt;</code></li>
<li>Queue: <code>java.util.Queue: public interface Queue&lt;E&gt; extends Collection&lt;E&gt;</code></li>
</ul></li>
<li>Stack applications:
<ul>
<li>Parsing in a complier
<ul>
<li>Dijkstra's two-stack algorithm
<ul>
<li>Operand: push into the operand stack</li>
<li>Operator: push into the operator stack</li>
<li>Left parenthesis: ignore</li>
<li>Right parenthesis: pop operator and two operands, calculate, push the result into the operand stack</li>
</ul></li>
</ul></li>
<li>Java virtual machine</li>
<li>Undo in a word processor</li>
<li>Back button in a web browser</li>
<li>...</li>
</ul></li>
</ul></li>
<li>Problems
<ul>
<li>Create a queue using two stack <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// You should not use java.util.Stack, you should use java.util.Deque instead:</span></span><br><span class="line"><span class="comment">// A more complete and consistent set of LIFO stack operations is provided by the  </span></span><br><span class="line"><span class="comment">// Deque interface and its implementations, which should be used in preference to this class. </span></span><br><span class="line"><span class="comment">//Space complexity: O(N), time complexity: O(N)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyQueue</span> </span>&#123;</span><br><span class="line">  Deque&lt;Integer&gt; out, in;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      in = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">      out = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (!out.isEmpty()) &#123;</span><br><span class="line">        in.addLast(out.pollLast());</span><br><span class="line">      &#125;</span><br><span class="line">      in.addLast(x);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (!in.isEmpty()) &#123;</span><br><span class="line">        out.addLast(in.pollLast());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> out.pollLast();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">while</span> (!in.isEmpty()) &#123;</span><br><span class="line">        out.addLast(in.pollLast());</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> out.peekLast();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> out.isEmpty() &amp;&amp; in.isEmpty();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//Time complexity: amortized O(1), space complexity: O(N)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyQueue</span> </span>&#123;</span><br><span class="line">  Deque&lt;Integer&gt; out, in;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyQueue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      in = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">      out = <span class="keyword">new</span> ArrayDeque&lt;&gt;();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">push</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">      in.addLast(x);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">pop</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (out.isEmpty()) &#123;</span><br><span class="line">          <span class="keyword">while</span> (!in.isEmpty()) &#123;</span><br><span class="line">            out.addLast(in.pollLast());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> out.pollLast();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">peek</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (out.isEmpty()) &#123;</span><br><span class="line">          <span class="keyword">while</span> (!in.isEmpty()) &#123;</span><br><span class="line">            out.addLast(in.pollLast());</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> out.peekLast();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">empty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> out.isEmpty() &amp;&amp; in.isEmpty();</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
<li>Max/Min Stack: use another stack to trace the max/min value</li>
</ul></li>
</ul></li>
<li>Elementary Sorts
<ul>
<li>Sorting Introduction
<ul>
<li>Callbacks
<ul>
<li>Goal: sort any type of data</li>
<li>Client passes array of objects to <code>sort()</code> function, the sort function calls back object's <code>compareTo()</code> method as needed</li>
</ul></li>
<li>Implementing callbacks
<ul>
<li>Java: interface <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparable</span>&lt;<span class="title">Item</span>&gt; </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compareTo</span><span class="params">(Item that)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// v.compareTo(w) returns negative integer, zero, or positive if v &lt; w, v == w, or v &gt; w</span></span><br><span class="line"><span class="comment">// if v and w are not comparable, throws an Exception</span></span><br></pre></td></tr></table></figure></li>
<li>C: function pointers</li>
<li>C++: class-type pointers</li>
<li>Python, Perl, Javascript: first-class functions</li>
</ul></li>
<li>Total order:
<ul>
<li>Antisymmetry: if <span class="math inline">\(v \leq w\)</span> and <span class="math inline">\(w \leq v\)</span>, then <span class="math inline">\(v = w\)</span></li>
<li>Transitivity: if <span class="math inline">\(v \leq w\)</span> and <span class="math inline">\(w \leq x\)</span>, then <span class="math inline">\(v \leq x\)</span></li>
<li>Totality: either <span class="math inline">\(v \leq w\)</span> or <span class="math inline">\(w \leq v\)</span> or both</li>
</ul></li>
</ul></li>
<li>Selection Sort
<ul>
<li>Idea to get an ascending array
<ul>
<li>In iteration i, find index <code>min</code> of smallest remaining entry</li>
<li>Swap <code>array[i]</code> and <code>array[min]</code></li>
<li>The part on the left side of i is an invariant, that is, the entries are sorted</li>
</ul></li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SelectionSort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = items.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> min = i;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; N; j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (items[j].compareTo(items[min]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          min = j;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      Comparable item = items[min];</span><br><span class="line">      items[min] = items[i];</span><br><span class="line">      items[i] = item;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>For an array with size <span class="math inline">\(N\)</span>, selection sort takes about <span class="math inline">\(\frac{N^2}{2}\)</span> comparisons and about <span class="math inline">\(N\)</span> exchanges. No matter whether the input is sorted or totally unsorted, the complexity of selection sort is always quadratic</li>
</ul></li>
<li>Insertion Sort
<ul>
<li>Idea to get an ascending array
<ul>
<li>In iteration i, swap <code>array[i]</code> with each larger entry to its left</li>
<li>The part on the left side of i is an invariant, that is, the entries are sorted</li>
</ul></li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsertionSort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = items.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; items[j].compareTo(items[j - <span class="number">1</span>]) &lt; <span class="number">0</span>; j--) &#123;  </span><br><span class="line">          Comparable item = items[j];</span><br><span class="line">          items[j] = items[i];</span><br><span class="line">          items[i] = item;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>For a randomly-ordered array with <span class="math inline">\(N\)</span> distinct keys, insertion sort uses about <span class="math inline">\(\frac{N^2}{4}\)</span> comparisons and about <span class="math inline">\(\frac{N^2}{4}\)</span> exchanges on average.</li>
<li>For an ordered array, insertion sort makes <span class="math inline">\(N - 1\)</span> comparisons and <span class="math inline">\(0\)</span> exchanges</li>
<li>For an reversely-ordered array, insertion sort makes about <span class="math inline">\(\frac{N^2}{2}\)</span> comparisons and about <span class="math inline">\(\frac{N^2}{4}\)</span> exchanges</li>
</ul></li>
<li>Shell Sort
<ul>
<li>Idea to get an ascending array
<ul>
<li>Move entries more than one position at a time by h-sorting the array</li>
<li>Use insertion sort in h-sorting: for large h, the subarray is small, so sorting can be fast, for small h, the array is nearly sorted, to insertion sort is fast</li>
<li>A m-sorted array is still m-sorted after being n-sorted</li>
<li>The general chosen h is <span class="math inline">\(h = 3 * h + 1\)</span></li>
</ul></li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShellSort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = items.length;</span><br><span class="line">    <span class="keyword">int</span> h = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (h &lt; N /<span class="number">3</span>) &#123;</span><br><span class="line">      h = <span class="number">3</span> * h + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (h &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = h; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt;= h &amp;&amp; items[j].compareTo(items[j - h]) &lt; <span class="number">0</span>; j -= h) &#123;</span><br><span class="line">          Comparable item = items[j];</span><br><span class="line">          items[j] = items[j - h];</span><br><span class="line">          items[j - h] = item;</span><br><span class="line">        &#125;</span><br><span class="line">        h = h / <span class="number">3</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>The worst-case number of comparisons used by shell sort with <span class="math inline">\(3 * h + 1\)</span> increments is <span class="math inline">\(O(N^{\frac{3}{2}})\)</span></li>
<li>Shell sort is faster than selection sort and insertion sort, the larger the array is, the better the performance is</li>
</ul></li>
<li>Shuffling Sort
<ul>
<li>Initial idea to get a randomized shuffle of an array
<ul>
<li>Generate a random real number for each array entry</li>
<li>Sort the array</li>
</ul></li>
<li>Shuffle sort produces a uniformly random permutation of the input array, provided no duplicate values</li>
<li>Knuth shuffle in linear time
<ul>
<li>In iteration i, pick integer r between 0 and i uniformly at random</li>
<li>Swap <code>array[r]</code> and <code>array[i]</code></li>
<li>The part on the left side of i is an invariant, that is, the entries are uniformly randomized</li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShuffleSort</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = items.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> r = StdRandom.uniform(i + <span class="number">1</span>); <span class="comment">// Uniform random number in [0, i]</span></span><br><span class="line">      Comparable item = items[r];</span><br><span class="line">      items[r] = items[i];</span><br><span class="line">      items[i] = item;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Convex Hull
<ul>
<li>Some equivalent definitions of a convex hull
<ul>
<li>The smallest perimeter fence enclosing a set of points</li>
<li>The smallest convex set containing all the points</li>
<li>The smallest area convex polygon enclosing the points</li>
<li>The convex polygon enclosing the points, whose vertices are points in set</li>
</ul></li>
<li>Output: sequence of vertices in counterclockwise order</li>
<li>Fact
<ul>
<li>Can traverse the convex hull by making only counterclockwise turns</li>
<li>The vertices of convex hull appear in increasing order of polar angle with respect to point p with lowest y-coordinate</li>
</ul></li>
<li>Graham Scan
<ul>
<li>Choose point p with smallest y-coordinate</li>
<li>Sort points by polar angle with p</li>
<li>Consider points in order, discard unless it creates a counterclockwise turn</li>
</ul></li>
</ul></li>
</ul></li>
</ol>
<h1 id="week-3">Week 3</h1>
<ol type="1">
<li>Merge Sort
<ul>
<li>Introduction
<ul>
<li>Two classic sorting algorithm
<ul>
<li>Merge sort: java sort for objects, Perl, C stable sort, Python stable sort, Firefox javascript, ...</li>
<li>Quick sort: java sort for primitive types, C qsort, Unix, C++, Python, Matlab, Chrome javascript, ...</li>
</ul></li>
<li>Idea is divide and conquer
<ul>
<li>Divide the array into two halves</li>
<li>Recursively sort each half</li>
<li>Merge the two halves using an auxiliary array</li>
</ul></li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeSort</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">    aux = <span class="keyword">new</span> Comparable[a.length];     <span class="comment">// Do not create aux in the private recursive sorts</span></span><br><span class="line">    sort(items, <span class="number">0</span>, items.length - <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hi &lt;= lo) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">    sort(items, lo, mid);</span><br><span class="line">    sort(items, mid + <span class="number">1</span>, hi);</span><br><span class="line">    merge(items, lo, mid, hi);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// assert isSorted(items, lo, mid);</span></span><br><span class="line">    <span class="comment">// assert isSorted(items, mid + 1, hi);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= hi; i++) &#123;</span><br><span class="line">      aux[i] = items[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> i = lo; j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">        items[k] = aux[j++];              <span class="comment">// items[lo...mid] has already been copied</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) &#123;</span><br><span class="line">        items[k] = items[i++];              <span class="comment">// items[mid + 1...hi] has already been copied</span></span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[j].compareTo(aux[i]) &lt; <span class="number">0</span>) &#123;              </span><br><span class="line">        items[k] = aux[j++];                  <span class="comment">// For stability reason, we cannot revert this else if statement and the else statement</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        items[k] = aux[i++];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// assert isSorted(items, lo, hi)</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure></li>
<li>Facts
<ul>
<li>Merge sort uses at most <span class="math inline">\(NlogN\)</span> comparisons and <span class="math inline">\(6NlogN\)</span> array access to sort any array of size <span class="math inline">\(N\)</span>. If <span class="math inline">\(D(N)\)</span> satisfies <span class="math inline">\(D(N) = 2D(\frac{N}{2}) + N\)</span> for <span class="math inline">\(N &gt; 1\)</span>, with <span class="math inline">\(D(1) = 0\)</span>, then <span class="math inline">\(D(N) = N logN\)</span></li>
<li>Merge sort uses extra space proportional to <span class="math inline">\(N\)</span></li>
<li>A sorting algorithm is in-place if it uses <span class="math inline">\(\leq clogN\)</span> extra memory. Ex. insertion sort, selection sort, shell sort. Merge sort can be in-place, [Kronrod, 1969]</li>
</ul></li>
<li>Improvements
<ul>
<li>Merge sort is recursive, so it will be slow for small subarrays, we can use insertion sort for small subarrays <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> FUTOFF = <span class="number">7</span>;       <span class="comment">// you can set your own cutoff to decide how small is an small array</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hi &lt;= lo + CUTOFF - <span class="number">1</span>) &#123;</span><br><span class="line">    InsertionSort.sort(items, lo, hi);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">  sort(items, aux, lo, mid);</span><br><span class="line">  sort(items, aux, mid + <span class="number">1</span>, hi);</span><br><span class="line">  merge(items, aux, lo, mid, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>If <code>items[mid] &lt;= items[mid + 1]</code>, then don't need to merge, the whole array is already sorted <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hi &lt;= lo + CUTOFF - <span class="number">1</span>) &#123;</span><br><span class="line">    InsertionSort.sort(items, lo, hi);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> mid = lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">  sort(items, aux, lo, mid);</span><br><span class="line">  sort(items, aux, mid + <span class="number">1</span>, hi);</span><br><span class="line">  <span class="keyword">if</span> (items[mid].compareTo(items[mid + <span class="number">1</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  merge(items, aut, lo, mid, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Eliminate the copy to the auxiliary array <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] items, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> i = lo; </span><br><span class="line">  <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; mid) &#123;+</span><br><span class="line">      aux[k] = items[j++]              </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) &#123;</span><br><span class="line">      aux[k] = items[i++]              </span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (items[j].compareTo(items[i]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      aux[k] = items[j++]</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      aux[k] = items[i++];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (hi &lt;= lo + CUTOFF - <span class="number">1</span>) &#123;</span><br><span class="line">    InsertionSort.sort(items, lo, hi);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> mid = lo + (high - lo) / <span class="number">2</span>;</span><br><span class="line">  sort(aux, items, lo, mid);</span><br><span class="line">  sort(aux, items, mid + <span class="number">1</span>, hi);</span><br><span class="line">  <span class="keyword">if</span> (aux[mid].compareTo(aux[mid + <span class="number">1</span>]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125; </span><br><span class="line">  merge(aux, items, lo, mid, hi);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Bottom-up Merge Sort
<ul>
<li>No recursion needed plan
<ul>
<li>Pass through array, merging subarrays of size 1</li>
<li>Repeat for subarrays of size 2, 4, 6, 8, 16, ..., array.length</li>
</ul></li>
<li>Implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MergeSort</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> Comparable[] aux;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">merge</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = lo; </span><br><span class="line">    <span class="keyword">int</span> j = mid + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i &gt; mid) &#123;</span><br><span class="line">        items[k] = aux[j++];</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi) &#123;</span><br><span class="line">        items[k] = aux[i++];</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (aux[j].compareTo(aux[i]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        items[k] = aux[j++];</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        items[k] = aux[i++];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> N = items.length;</span><br><span class="line">    aux = <span class="keyword">new</span> Comparable[N];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> sz = <span class="number">1</span>; sz &lt; N; sz *= <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">for</span>(<span class="keyword">int</span> lo = <span class="number">0</span>; lo &lt; N - sz; lo += sz * <span class="number">2</span>) &#123;</span><br><span class="line">        merge(items, lo, lo + sz - <span class="number">1</span>, Math.min(lo + sz * <span class="number">2</span> - <span class="number">1</span>, N -<span class="number">1</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>Sorting Complexity
<ul>
<li>Complexity of sorting
<ul>
<li>Computational complexity: framework to study efficiency of algorithms for solving a particular problem X</li>
<li>Model of computation: allowable operations</li>
<li>Cost model: operation counts</li>
<li>Upper bound: cost guarantee provided by some algorithm for X</li>
<li>Lower bound: proven limit on cost guarantee of all algorithms for X</li>
<li>Optimal algorithm: algorithm with best possible cost guarantee for X</li>
<li>Sorting Ex.
<ul>
<li>Model of computation: decision tree
<ul>
<li>The height of the tree is the worst-case number of comparisons</li>
<li>There is at least one leaf for each possible ordering</li>
</ul></li>
<li>Cost model: number of comparisons</li>
<li>Upper bound: about <span class="math inline">\(NlogN\)</span> from merge sort</li>
<li>Lower bound: Any compare-based sorting algorithm must at least <span class="math inline">\(lg(N!) \sim NlgN (Stirling&#39;s formula)\)</span> comparisons in the worst-case</li>
<li>Optimal algorithm：merge sort is an optimal algorithm</li>
</ul></li>
</ul></li>
<li>Merge sort is optimal with respect to number of comparisons but it's not optimal with respect to space usage</li>
<li>Complexity results in context: if more information is provided in terms of the initial order of input, the distribution of key values, or the representation of the keys, lower bound may not hold
<ul>
<li>Partially-ordered array: insertion sort requires only <span class="math inline">\(N - 1\)</span> comparisons if input is sorted</li>
<li>Duplicate keys: three-way quick sort can be used</li>
<li>Digital properties of keys: use digit/character comparisons instead of key comparisons for number and strings, radix sort is used here</li>
</ul></li>
</ul></li>
<li>Comparators
<ul>
<li><p>Comparable interface: sort using a type's natural order</p></li>
<li><p>Comparator interface: sort using an alternate order, the order must be a total order <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Comparator</span> &lt;<span class="title">Key</span>&gt; </span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">int</span> <span class="title">compare</span><span class="params">(Key v, Key w)</span></span>;</span><br><span class="line">   <span class="comment">// If v is less than w, then compare(v, w) &lt; 0ssss</span></span><br><span class="line">   <span class="comment">// If v equals to w, then compare(v, w) == 0</span></span><br><span class="line">   <span class="comment">// If v is larger than w, then compare(v, w) &gt; 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>Usage in <code>Arrays.sort()</code></p>
<ul>
<li>Create Comparator instance, the instance is an object of a class that implements the Comparator interface</li>
<li>Pass as second argument to <code>Arrays.sort()</code></li>
</ul></li>
</ul></li>
<li>Stability
<ul>
<li>A stable sort preserves the relative order of items with equal keys. If in the original array we have <code>array[i] == array[j], and i &lt; j</code>, then in the sorted array, <code>array[i]</code> should still appear ahead of <code>array[j]</code></li>
<li>Insertion sort and merge sort are stable, selection sort and shell sort are not stable. You need to check how the <code>compareTo()</code> method or the <code>compare()</code> method is implemented<br>
</li>
<li>Insertion sort: we check <code>j &gt; 0 &amp;&amp; items[j].compareTo(items[j - 1]) &lt; 0</code>, so no equal items never move past each other</li>
<li>Selection sort: there may be a long-distance exchange that might move an item past some equal item, here we <code>swap(array[i], array[min]), where min is in &#123;i + 1, ..., array.length - 1&#125;</code></li>
<li>Merge sort: it's stable as long as merge operation is stable, and in the merge function, we have <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (aux[j].compareTo(aux[i]) &lt; <span class="number">0</span>) &#123;              </span><br><span class="line">  items[k] = aux[j++];                  </span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  items[k] = aux[i++];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> hence if there is an equal situations(<code>aux[j] == aux[i]</code>), we use the left part <code>aux[i]</code> so that we will not change the relative order of <code>aux[i]</code> and <code>aux[j]</code>, therefore it's stable</li>
<li>Shell sort: there is a long-distance exchange in shell sort so it's not stable, we <code>swap(array[j], array[j - h])</code>, there may be values that are equal to <code>array[j - h]</code> in the interval of <code>[j - h + 1, , j - 1]</code>, so it's not stable</li>
<li>Question: <img src="/images/Algorithm/Stability.png">
<ul>
<li>We only need to care about situation where <span class="math inline">\(x_0 = x_1, and \; y_0 = y_1\)</span>, if these points can be put near each other, then it's fine</li>
<li>Choice A: A is fine</li>
<li>Choice B: quick sort x, so x is in order, merge sort y will not change the sorted x since it's stable</li>
<li>Choice C: merge sort x, so x is in order, quick sort y may change the sorted x since it's unstable</li>
<li>Choice D: merge sort is stable</li>
</ul></li>
</ul></li>
<li>Problems:
<ul>
<li>Suppose that the subarray <code>a[0]</code> to <code>a[n - 1]</code> is sorted, and the subarray <code>a[n]</code> to <code>a[2 * n - 1]</code> is sorted. How can you merge the two subarrays so that array a is sorted using an auxiliary array of length n instead of 2n? <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">mergeWithShortAux</span><span class="params">(Comparable[] a, Comparable[] aux)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> N = a.length / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">    aux[i] = a[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>; </span><br><span class="line">  <span class="keyword">int</span> j = N;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; i &lt; a.length; k++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; N) &#123;</span><br><span class="line">      a[k++] = a[j++];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; a.length) &#123;</span><br><span class="line">      a[k++] = a[i++];</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>(a[j].CompareTo(aux[i]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">      a[k++] = a[j++];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      a[k++] = aux[i++];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>An inversion in an array <code>a[]</code> is a pair of entries <code>a[i]</code> and <code>a[j]</code> such that <code>i &lt; j</code> but <code>a[i] &gt; a[j]</code>. Given an array, design a linearithmic algorithm to count the number of inversions. <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Obviously there is an O(n^2) solution, for i in range(len(a)), if a[j] &gt; a[i] for j in range(i + 1, len(a)), then count ++</span></span><br><span class="line"><span class="comment">// The following one is from https://www.youtube.com/watch?v=Vj5IOD7A6f8</span></span><br><span class="line"><span class="comment">//Idea inversion in a = recursive count (left half) + recursive count (right half) + merge count(left + right)</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">merge</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> mid, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">    aux[k] = a[k];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> i = lo, j = mid + <span class="number">1</span>, count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> k = lo; k &lt;= hi; k++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (i &gt; mid)</span><br><span class="line">          a[k] = aux[j++];</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; hi)</span><br><span class="line">          a[k] = aux[i++];</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (aux[i].compareTo(aux[j]) &gt; <span class="number">0</span>) &#123; </span><br><span class="line">          a[k] = aux[j++];</span><br><span class="line">          count += mid - i + <span class="number">1</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123; </span><br><span class="line">          a[k] = aux[i++];</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">sort</span><span class="params">(Comparable[] a, Comparable[] aux, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (lo &gt;= hi) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = lo + (hi - lo)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">int</span> count1 = sort(a, aux, lo, mid);</span><br><span class="line">    <span class="keyword">int</span> count2 = sort(a, aux, mid + <span class="number">1</span>, hi);</span><br><span class="line">    <span class="keyword">int</span> count3 = merge(a, aux, lo, mid, hi);</span><br><span class="line">    <span class="keyword">return</span> count1 + count2 + count3;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">inverseionCount</span><span class="params">(Comparable[] a)</span> </span>&#123;</span><br><span class="line">    Comparable[] aux = <span class="keyword">new</span> Comparable[a.length];</span><br><span class="line">    <span class="keyword">return</span> sort(a, aux, <span class="number">0</span>, a.length - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Quick Sort
<ul>
<li>Introduction
<ul>
<li>Ieda
<ul>
<li>Randomly shuffle the array</li>
<li>Partition the array, so that for some j, <code>array[i]</code> is in place, no larger entry to the left of j, no smaller entry to the right of j</li>
<li>Sort each piece recursively</li>
</ul></li>
<li>Partition
<ul>
<li>Phase I: repeat until i and j pointers cross
<ul>
<li>Scan i from left to right so long as <code>array[i] &lt; array[lo]</code></li>
<li>Scan j from right to left so long as <code>array[j] &gt; array[lo]</code></li>
<li>Exchange <code>array[i]</code> with <code>array[j]</code></li>
</ul></li>
<li>Phase II: when pointers cross.
<ul>
<li>Exchange <code>array[j]</code> with <code>array[lo]</code></li>
</ul></li>
</ul></li>
<li>Java implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuickSort</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">partition</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">int</span> i = lo, j = hi + <span class="number">1</span>;</span><br><span class="line">      <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        <span class="keyword">while</span> (items[++i].compareTo(items[lo]) &lt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (i == hi) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (items[--j].compareTo(items[lo]) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (j == lo) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      Comparable item = items[j];</span><br><span class="line">        items[j] = items[lo];</span><br><span class="line">        items[lo] = item;</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (hi &lt;= lo) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">int</span> j = partition(items, lo, hi);</span><br><span class="line">      sort(items, lo, j - <span class="number">1</span>);</span><br><span class="line">      sort(items, j + <span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items)</span> </span>&#123;</span><br><span class="line">      StdRandom.shuffle(items);</span><br><span class="line">      sort(items, <span class="number">0</span>, items.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Implementation Comments
<ul>
<li>The partition in quick sort is in-place, compared with merge sort, quick sort does not take any extra space</li>
<li>Testing whether the pointers cross is a bit trickier than it might seem, especially when there are duplicate keys</li>
<li>Testing <code>j ==lo</code> is redundant, but testing <code>i == hi</code> is not</li>
<li>Random shuffling is needed for performance guarantee</li>
<li>When duplicates are present, it is better to stop on keys equal to the partitioning item's key</li>
</ul></li>
<li>Performance analysis
<ul>
<li>On average, quick sort makes <span class="math inline">\(\sim 2NlogN\)</span> comparisons and <span class="math inline">\(\sim \frac{1}{3}NlogN\)</span> exchanges</li>
<li>In best cases, quick sort makes <span class="math inline">\(\sim NlogN\)</span> comparisons</li>
<li>In worst cases, quick sort makes <span class="math inline">\(\sim \frac{1}{2} N^{2}\)</span> comparisons, randomly shuffling can avoid these situations</li>
</ul></li>
<li>Properties
<ul>
<li>Quick sort is an in-place sorting algorithm</li>
<li>Quick sort is not stable</li>
</ul></li>
</ul></li>
<li>Selection
<ul>
<li>Goal: given an array of <span class="math inline">\(N\)</span> items, find the <span class="math inline">\(k^{th}\)</span> largest</li>
<li>Applications: order statistics, find the top k</li>
<li>Quick-select
<ul>
<li>Partition array so that:
<ul>
<li>Entry <code>array[j]</code> is in place</li>
<li>No larger entry to the left of j</li>
<li>No larger entry to the right of j</li>
</ul></li>
<li>Repeat in one subarray, depending on j; finished when <code>j == k</code></li>
</ul></li>
<li>Java implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Comparable <span class="title">select</span><span class="params">(Comparable[] items, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  StdRandom.shuffle(items);</span><br><span class="line">  <span class="keyword">int</span> lo = <span class="number">0</span>, hi = items.length - <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">while</span> (hi &gt; lo) &#123;</span><br><span class="line">    <span class="keyword">int</span> j = partition(items, lo, hi);</span><br><span class="line">    <span class="keyword">if</span> (j &lt; k) &#123;</span><br><span class="line">      lo = j + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j &gt; k) &#123;</span><br><span class="line">      hi = j - <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> items[k]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> items[k];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>Quick-select takes linear time on average</li>
</ul></li>
<li>Duplicate Keys
<ul>
<li>Merge sort with duplicate keys: always between <span class="math inline">\(\frac{1}{2}NlogN\)</span> and <span class="math inline">\(NlogN\)</span> comparisons</li>
<li>Quick sort with duplicate keys: algorithm goes quadratic unless partitioning stops on equal keys</li>
<li>Dijkstra three-way partitioning quick sort
<ul>
<li>Let v be partitioning item <code>items[lo]</code></li>
<li>Scan i from left to right:
<ul>
<li>If <code>items[i] &lt; v</code>: exchange <code>items[lt]</code> with <code>items[i]</code>, increase both lt and i</li>
<li>If <code>items[i] &gt; v</code>: exchange <code>items[gt]</code> with <code>items[i]</code>, decrease gt</li>
<li>If <code>items[i] == v</code>: increase i</li>
</ul></li>
<li>Java implementation <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Quick3Way</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sort</span><span class="params">(Comparable[] items, <span class="keyword">int</span> lo, <span class="keyword">int</span> hi)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hi &lt;= lo) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> lt = lo, i = lo + <span class="number">1</span>, gt = hi;</span><br><span class="line">    Comparable v = items[lo];</span><br><span class="line">    <span class="keyword">while</span> (i &lt;= gt) &#123;</span><br><span class="line">      <span class="keyword">int</span> cmpt = items[i].compareTo(v);</span><br><span class="line">      <span class="keyword">if</span> (cmp &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        Comparable item = items[i];</span><br><span class="line">        items[i] = items[lt];</span><br><span class="line">        items[lt] = item;</span><br><span class="line">        lt++;</span><br><span class="line">        i++;</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cmp &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        Comparable item = items[i];</span><br><span class="line">        items[i] = items[gt];</span><br><span class="line">        items[gt] = item;</span><br><span class="line">        gt--;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        i++;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(items, lo, lt - <span class="number">1</span>);</span><br><span class="line">    sort(items, gt + <span class="number">1</span>, hi);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Quick sort with 3-way partitioning is entropy-optimal</li>
<li>Randomized quick sort with 3-way partitioning reduces running time from linearithmic to linear in board class of applications</li>
</ul></li>
</ul></li>
<li>System Sorts
<ul>
<li><code>Arrays.sort()</code>
<ul>
<li>Uses tuned quick sort for primitive types; uses tuned merge sort for objects. For objects, merge sort is stable and guarantees <span class="math inline">\(NlogN\)</span> performance, for primitive types, quick sort uses less memory and is faster in generals. If you deliberately create primitive inputs without proper shuffling, the <code>Arrays.sort()</code> with quick sort can fail.</li>
<li>Has different method for each primitive type</li>
<li>Has a method for data types that implements Comparable</li>
<li>Has a method that uses a Comparator</li>
</ul></li>
<li>Which sort to choose
<ul>
<li>Internal sort:
<ul>
<li>Insertion sort, selection sort, bubble sort, shaker sort</li>
<li>Quick sort, merge sort, heap sort, sample sort, shell sort</li>
<li>Solitaire sort, red-black sort, splay sort, Yaroslavskiy sort, psort</li>
</ul></li>
<li>External sort: Poly-phase merge sort, cascade-merge, oscillating sort</li>
<li>String/radix sorts: distribution, MSD, LSD, 3-way string quick sort</li>
<li>Parallel sort:
<ul>
<li>Bitonic sort, Batcher even-odd sort</li>
<li>Smooth sort, cube sort, column sort</li>
<li>GPU sort</li>
</ul></li>
</ul></li>
<li>Application attributes to consider: stable, parallel, deterministic, keys all distinct, multiple key types, linked list or arrays, large or small items, large or small items, is your array randomly ordered, need guarantee performance</li>
<li>Sort summary <img src="/images/Algorithm/SortSummary.png"></li>
</ul></li>
<li>Problems
<ul>
<li>Selection in two sorted arrays. Given two sorted arrays <code>a[]</code> and <code>b[]</code>, of length <span class="math inline">\(n_1\)</span> and <span class="math inline">\(n_2\)</span> and an integer <span class="math inline">\(0 \leq k \leq n_1 + n_2\)</span>, design an algorithm to find a key of rank k.
<ul>
<li>Solution 1: merge <code>a[]</code> and <code>b[]</code> into <code>c[]</code> where c[] is ordered with length <span class="math inline">\(n_1 + n_2\)</span>, pick c[k - 1]</li>
<li>Solution 2: compare <code>a[i]</code> and <code>b[j]</code>, use <code>count</code> to track number of comparisons, if <code>count == k</code>, return <code>a[count]</code> or <code>b[count]</code></li>
</ul></li>
</ul></li>
</ul></li>
</ol>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Yanxuanshaozhu
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://yanxuanshaozhu.github.io/2021/04/16/Princeton%20Algorithms%20Part%20One%20Notes/" title="Princeton Algorithms Part One Notes">https://yanxuanshaozhu.github.io/2021/04/16/Princeton Algorithms Part One Notes/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Algorithm-Part-One/" rel="tag"># Algorithm Part One</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/04/03/Build%20a%20Modern%20Computer%20from%20First%20Principles%20Part%20One%20Notes/" rel="prev" title="Build a Modern Computer from First Principles Part One Notes">
      <i class="fa fa-chevron-left"></i> Build a Modern Computer from First Principles Part One Notes
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/04/19/Introduction%20to%20Machine%20Learning%20Notes/" rel="next" title="Introduction to Machine Learning Notes">
      Introduction to Machine Learning Notes <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#week-1"><span class="nav-number">1.</span> <span class="nav-text">Week 1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-2"><span class="nav-number">2.</span> <span class="nav-text">Week 2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-3"><span class="nav-number">3.</span> <span class="nav-text">Week 3</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yanxuanshaozhu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Yanxuanshaozhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yanxuanshaozhu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanxuanshaozhu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mrlixm.cn@gmail.com" title="E-Mail → mailto:mrlixm.cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yanxuanshaozhu</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">183k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">2:46</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
