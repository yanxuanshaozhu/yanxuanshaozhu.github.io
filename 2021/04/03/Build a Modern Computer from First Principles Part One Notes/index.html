<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yanxuanshaozhu.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Course Name: Build a Modern Computer from First Principles: From Nand to Tetris (Project-Centered Course)   Course Website： Coursera  Instructor: Professor Shimon Schocken, Professor Noam Nisans">
<meta property="og:type" content="article">
<meta property="og:title" content="Build a Modern Computer from First Principles Part One Notes">
<meta property="og:url" content="https://yanxuanshaozhu.github.io/2021/04/03/Build%20a%20Modern%20Computer%20from%20First%20Principles%20Part%20One%20Notes/index.html">
<meta property="og:site_name" content="My Blog">
<meta property="og:description" content="Course Name: Build a Modern Computer from First Principles: From Nand to Tetris (Project-Centered Course)   Course Website： Coursera  Instructor: Professor Shimon Schocken, Professor Noam Nisans">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Layers.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/HackComputer.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Xorgate.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Project1.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/VonNeumann.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/ALUFunction.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Project2.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/SequentialLogicImplementation.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/RAMUnit.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/ProgramCounter.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Project3.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Comp.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Dest.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Jump.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/C-InstructionBinary.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/KeyboardMemoryMap.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Project4.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/FetchExecuteMultiplexer.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/HackCPU.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/AInstructionHandling.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/CInstructionHandling.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/ALUOperation.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/Control.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/HackComputerImplementation.png">
<meta property="og:image" content="https://yanxuanshaozhu.github.io/images/Nand/HardwareProjects.png">
<meta property="article:published_time" content="2021-04-03T08:29:32.000Z">
<meta property="article:modified_time" content="2021-04-18T16:40:59.510Z">
<meta property="article:author" content="Yanxuanshaozhu">
<meta property="article:tag" content="Build a Modern Computer Part One">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yanxuanshaozhu.github.io/images/Nand/Layers.png">

<link rel="canonical" href="https://yanxuanshaozhu.github.io/2021/04/03/Build%20a%20Modern%20Computer%20from%20First%20Principles%20Part%20One%20Notes/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Build a Modern Computer from First Principles Part One Notes | My Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">My Blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags<span class="badge">15</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories<span class="badge">5</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">15</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://yanxuanshaozhu.github.io/2021/04/03/Build%20a%20Modern%20Computer%20from%20First%20Principles%20Part%20One%20Notes/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="Yanxuanshaozhu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="My Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Build a Modern Computer from First Principles Part One Notes
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-04-03 16:29:32" itemprop="dateCreated datePublished" datetime="2021-04-03T16:29:32+08:00">2021-04-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-04-19 00:40:59" itemprop="dateModified" datetime="2021-04-19T00:40:59+08:00">2021-04-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/" itemprop="url" rel="index"><span itemprop="name">Computer Science</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>26k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>23 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p style="text-align:left; font-weight:bold;">
Course Name: Build a Modern Computer from First Principles: From Nand to Tetris (Project-Centered Course)
</p>
<p><a style="text-align:left; font-weight:bold;" target="_blank" rel="noopener" href="https://www.coursera.org/learn/build-a-computer"> Course Website： Coursera</a></p>
<p style="text-align:left; font-weight:bold;">
Instructor: Professor Shimon Schocken, Professor Noam Nisans
</p>
<p style="text-align:left; font-weight:bold;">
Book: The Elements for Computing Systems--Build a Modern Computer from First Principles
</p>
<a id="more"></a>
<h1 id="week-1">Week 1</h1>
<p>1 Module 0: Introduction</p>
<ol type="1">
<li>One only need to know about 'what' rather than 'how' to do programming</li>
</ol>
<ul>
<li>'How' is about implementation, since you're only using the computers, you don't need to duplicate it, then you don't need to know how to make it actually happen.</li>
<li>'What' is about abstraction, you care about what your program suppose to do, i.e., what will happen for each commands you write.</li>
<li>For multiple layers of abstraction, we only care about the upmost layer interface <img src="/images/Nand/Layers.png"></li>
</ul>
<ol start="2" type="1">
<li>From Nand to Hack</li>
</ol>
<ul>
<li>The Hack Computer <img src="/images/Nand/HackComputer.png"></li>
<li>Nand is the most elementary logic gate. Other gates like combinatorial logic gates and sequential logic gates are built based on Nand.</li>
<li>Use hardware simulator to design, test and debug the hardware that one wants to build.</li>
</ul>
<ol start="3" type="1">
<li>From Hack to Tetris</li>
</ol>
<ul>
<li>Rich language: expressions, loops, data types, classes, methods</li>
<li>Built in operations: I/O, Math</li>
<li>High level language, Complier</li>
<li>Operating System, Standard Library</li>
</ul>
<p>2 Module 1: Boolean Functions and Gate Logic</p>
<ol type="1">
<li>Boolean Logic
<ul>
<li>Boolean operations:
<ul>
<li><code>(x AND y)</code> or x <span class="math inline">\(\land\)</span> y</li>
<li><code>(x OR y)</code> or x <span class="math inline">\(\lor\)</span> y</li>
<li><code>NOT(x)</code> or <span class="math inline">\(\neg\)</span> x</li>
</ul></li>
<li>Boolean Functions
<ul>
<li>Example: <code>f(x, y, z) = (x AND y) OR (NOT(X) AND z)</code></li>
<li>You can also use a truth table to describe a function apart from a formula</li>
</ul></li>
<li>Boolean Identities:
<ul>
<li><code>(x AND y) = (y AND x)</code> this is a commutative law</li>
<li><code>(x AND (y AND z)) = ((x AND y) AND z)</code> this is an associative law</li>
<li><code>(x AND (y OR z)) = (x AND y) OR (x AND z)</code> this is a distributive law</li>
<li><code>NOT(x AND y) = NOT(x) OR NOT(y)</code> this is a De Morgan Law</li>
</ul></li>
</ul></li>
<li>Boolean Function Synthesis
<ul>
<li><p>It's easy to draw a truth table from a boolean function, but the reverse process is actually what a computer does</p></li>
<li><p>The way converting a truth table into a boolean function formula is called constructing a disjunctive normal form</p></li>
<li><p>Steps:</p>
<ul>
<li>Find a function for each row with a value 1, the function should take 1 for the current row and 0 for all other rows</li>
<li>Use <code>OR</code> to combine the all found functions</li>
<li>Reduce the combined function to one simple function</li>
</ul></li>
</ul></li>
</ol>
<ul>
<li><p>Theorem: Any boolean function can be represented using an expression containing <code>AND</code>, and <code>NOT</code> operations.</p>
<pre><code>Proof: 

`OR` can be replaced with `AND` and `NOT` using De Morgan Law: `(x OR y) = NOT(NOT(x) AND NOT(y))`</code></pre>
<ul>
<li><p>Nand function: <code>(x NAND y) = NOT(x AND y)</code></p></li>
<li><p>Truth table for Nand:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">x</th>
<th style="text-align: center;">y</th>
<th style="text-align: center;">Nand</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">0</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
<td style="text-align: center;">1</td>
</tr>
<tr class="even">
<td style="text-align: center;">1</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">0</td>
</tr>
</tbody>
</table></li>
<li><p>Theorem: Any boolean function can be represented using only <code>NAND</code> operations.</p></li>
</ul>
<p>Proof:</p>
<p><code>NOT(x) = (x NAND x)</code></p>
<pre><code>`(x AND y) = NOT(x NAND y)`

Since `AND` and `NOT` can be represented by `NAND`, according to the previous theorem, any boolean functions then can be represented using `NAND`</code></pre></li>
</ul>
<ol start="3" type="1">
<li>Logic Gates
<ul>
<li>A logic gate is an idealized model of computation or physical electronic device implementing a boolean function. An ideal logic gate has zero rise time and unlimited fan-out, a non-ideal physical device is also a logic gate.</li>
<li>Elementary logic gate: <code>NAND</code></li>
<li>Other elementary logic gate: <code>AND</code>, <code>OR</code>, <code>NOT</code></li>
<li>Composite gates:
<ul>
<li>Example: a gate <code>(x AND y AND c)</code> can be regarded as a two step gate, <code>(x AND y)</code> and then <code>((x AND y) ANd c)</code>, the order of inputs doesn't change the result</li>
</ul></li>
<li>Gate interface answers the question 'What', gate implementation answers the question 'How'. In this sense, gate interface is unique, since there is only one way to describe what the gate is supposed to do, but there may be multiple implementations that realize the gate interface abstraction.
<ul>
<li>Example: circuit implementations with light bulbs</li>
</ul></li>
</ul></li>
<li>Hardware Description Language(HDL)
<ul>
<li><p>Example: <code>Xor</code> gate:</p>
<ul>
<li>Gate interface:<br>
<img src="/images/Nand/Xorgate.png"></li>
<li>Implementation: <figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**Xor gate: out = (a And Not(b)) OR (Not(a) And b) */</span></span><br><span class="line">CHIP Xor &#123;</span><br><span class="line">   <span class="keyword">IN</span> a, b;</span><br><span class="line">   <span class="keyword">OUT</span> <span class="keyword">out</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PARTS:</span><br><span class="line"><span class="keyword">Not</span>(<span class="keyword">in</span> = a, <span class="keyword">out</span> = nota);</span><br><span class="line"><span class="keyword">Not</span>(int = b, <span class="keyword">out</span> = notb);</span><br><span class="line"><span class="keyword">And</span>(a = a, b = notb; <span class="keyword">out</span> = aAndNotb);</span><br><span class="line"><span class="keyword">And</span>(a = nota, b = b, <span class="keyword">out</span> = notaAndb);</span><br><span class="line"><span class="keyword">Or</span>(a = aAndNotb, b = notaAndb, <span class="keyword">out</span> = <span class="keyword">out</span>);</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>HDL definition of a chip consists of a header section and a parts section. The header section specifies the chip interface, namely the chip name and the names of its input and output pins. The parts section describes the names and topology of all the lower-level parts from which this chip is constructed, each part is represented by a statement that specifies the part name and the way it is connected to other parts in the design.</p></li>
<li><p>HDL is a functional/declarative language</p></li>
<li><p>The order of HDL statement is insignificant</p></li>
<li><p>Before using a chip part, one must know its interface</p></li>
<li><p>Connections of names are common</p></li>
</ul></li>
</ol>
<ul>
<li>HDL languages: VHDL, Verilog, etc</li>
</ul>
<ol start="5" type="1">
<li>Hardware Simulation
<ul>
<li>Interactive simulation: the simulator only uses the HDL file</li>
<li>Script-based simulation: the simulator uses both the HDL file and the test script</li>
<li>With/without output and compare files: one can compare the output file with a compare file</li>
<li>Hardware construction projects:
<ul>
<li>System architects: decides which chips are needed, for each chip, creates the API, the test script and the compare file</li>
<li>Developers: given the resources, build the chips using hdl</li>
</ul></li>
</ul></li>
<li>Multi-bit Buses
<ul>
<li>Sometimes, manipulate together an array of bits is technically convenient, such a group of bits as a single entity is termed 'bus'</li>
<li>In HDL, there are some chips handling buses that bring much convenience and efficiency</li>
<li>Sub-bus:
<ul>
<li>Syntax: <code>a[16]</code>, <code>a[0..7] = lsb; a[8..15] = msb;</code></li>
<li>Overlaps of sub-buses are allowed on output busses of parts</li>
<li>Width of internal pins is deduced automatically</li>
<li><code>false(all 0s)</code> and <code>true(all 1s)</code> may be used as busses of any width</li>
</ul></li>
</ul></li>
<li>Project 1
<ul>
<li>Recommended chip-building procedure: <img src="/images/Nand/Project1.png"></li>
</ul></li>
</ol>
<h1 id="week-2">Week 2</h1>
<ol type="1">
<li>Binary Numbers
<ul>
<li>For <span class="math inline">\(N\)</span> bits, there are <span class="math inline">\(2 ^N\)</span> possible binary numbers</li>
<li>Convert a binary number to decimal number: <span class="math inline">\(\sum\limits_{k=0}^{n} {2^k}\)</span>, where <span class="math inline">\(k \in \{0, 1\}\)</span></li>
<li>Convert a decimal number to decimal number: <span class="math inline">\(\sum\limits_{t=0}^{n} {2^{k_t}} = Number\)</span>, then binary representation of the decimal number is: <span class="math inline">\({k_n}...{k_0}\)</span></li>
<li>LSB(least significant number): the right-most bit in the binary representation of a number, a.k.a., hight-order bit</li>
<li>MSB(most significant number): the left-most bit in the binary representation of a number, a.k.a., low-order bit</li>
<li>Usually the MSB is used for sign, i.e., <code>MSB = 0</code> means a positive number, <code>MSB = 1</code> means a negative number</li>
</ul></li>
<li>Binary Addition
<ul>
<li><p>If <span class="math inline">\(sum &lt; 2, \; position \; result = sum\)</span>,</p>
<p>if <span class="math inline">\(sum \geq 2, \; position \; result = sum \;\%\; 2,\; next \; position \; carry = 1\)</span></p></li>
<li><p>Overflow problem: since the computer has limited word size(the amount of bits to hold a number), if the calculation is beyond that, then the result is truncated in the following way: <span class="math inline">\(\; result = result \;\%\; word \; size\)</span>, where <span class="math inline">\(word \; size = 2^{N-1}\)</span>, since MSB is used for the sign of a number</p></li>
<li><p>Half adder: add two bits without considering possible position carry</p></li>
<li><p>Full adder: add two bits with position carry taken into consideration</p></li>
<li><p>Adder: add two numbers</p></li>
</ul></li>
<li>Negative numbers
<ul>
<li>Sign bit: if one uses this representation, then <code>1000</code> should not be -0, it should be -8. In this way, given the total word size <span class="math inline">\(N\)</span>, the range is <span class="math inline">\([0, 2^{N-1}-1] \; and \; [-2^{N-1}, -1]\)</span></li>
<li>2's Complement: the binary representation for <span class="math inline">\(-K\)</span> is the binary representation for <span class="math inline">\(2^{N} - K\)</span>, given the total word size <span class="math inline">\(N\)</span>. In this way, the range is also <span class="math inline">\([0, 2^{N-1}-1] \; and \; [-2^{N-1}, -1]\)</span>
<ul>
<li>There is truncation for <span class="math inline">\(2^{N} - K\)</span> if the binary representation is beyond the word size <span class="math inline">\(N\)</span></li>
</ul></li>
<li>Compute <span class="math inline">\(-X\)</span>: then wen can compute <span class="math inline">\(x - y\)</span> by using <span class="math inline">\(x + (-y)\)</span></li>
</ul></li>
<li>Arithmetic Logic Unit(ALU)
<ul>
<li>Von Neumann Architecture: <img src="/images/Nand/VonNeumann.png"></li>
<li>The ALU computes a function on two inputs, and outputs the result. The function includes a family of pre-defined arithmetic and logical functions.</li>
<li>The Hack ALU:
<ul>
<li>Two 16-bit, 2's complement inputs, one 16-bit, 2's complement output</li>
<li>One function selected using 6 1-bit inputs from a 18-function family. The 6 1-bit inputs are:
<ul>
<li><code>zx</code>: if <code>zx = 1</code>, then <code>x = 0</code></li>
<li><code>nx</code>: if <code>nx = 1</code>, then <code>x = !x</code></li>
<li><code>zy</code>: if <code>zy = 1</code>, then <code>y = 0</code></li>
<li><code>ny</code>: if <code>ny = 1</code>, then <code>y = !y</code></li>
<li><code>f</code>: if <code>f = 1</code>, then <code>out = x + y</code>, if <code>f = 0</code>, then <code>out = x &amp; y</code></li>
<li><code>no</code>: if <code>no = 1</code>, then <code>out = !out</code></li>
</ul></li>
</ul></li>
</ul>
<img src="/images/Nand/ALUFunction.png">
<ul>
<li>Also two 1-bit outputs:
<ul>
<li><code>zr</code>: if <code>out == 0</code>, then <code>zr = 1</code>, else <code>zr = 0</code> (You can check <code>out[k] == 0</code> for every k using <code>OR</code>)</li>
<li><code>ng</code>: if <code>out &lt; 0</code>, then <code>ng = 1</code>, else <code>ng = 0</code> (You can check if <code>out[MSB] == 1</code>)</li>
</ul></li>
<li>The hack ALU is simple, elegant and easy to implement</li>
</ul></li>
<li>Project 2 <img src="/images/Nand/Project2.png"></li>
</ol>
<h1 id="week-3">Week 3</h1>
<ol type="1">
<li>Sequential Logic
<ul>
<li>Combinatorial logic ignores time, everything happens immediate at the same time</li>
<li>Use integer time unit to represent the pass of time, each time unit has its own input and output</li>
<li>Ideally, the input occurs at the beginning of each unit, the output occurs at the ending of each unit, both instantaneously. However, there are some delays in reality(time for voltage changes, time for gate delay itself, etc.), it's quite necessary that the integer time unit is set a little bit wider to take the delays into consideration.</li>
<li>Mathematical representation:
<ul>
<li>Combinatorial logic: <span class="math inline">\(\; out[t] = function(in[t])\)</span></li>
<li>Sequential logic: <span class="math inline">\(\; out[t] = function(in[t - 1])\)</span>, since there is a delay from input to output, then we can simply use one variable called state instead, i.e., <span class="math inline">\(\; state[t] = function(state[t - 1])\)</span></li>
</ul></li>
</ul></li>
<li>Flip Flops
<ul>
<li>Gates that can flip between states are called flip flops(触发器)</li>
<li>The Clocked Data Flip Flop:
<ul>
<li><code>out[t] = in[t - 1]</code></li>
<li>It's primitive for this course, but actually it can be built from the <code>Nand</code> chip</li>
<li>Sequential logic implementation: <img src="/images/Nand/SequentialLogicImplementation.png"></li>
</ul></li>
<li>1-big Register: remembers an input forever until requested to load a new value
<ul>
<li>If the load bit exists, outputs last input, if the load bit perishes, outputs last output</li>
<li>Use a <code>Mux</code> and a `DFF to construct the 1-bit register</li>
</ul></li>
</ul></li>
<li>Memory Units
<ul>
<li><p>Categories:</p>
<ul>
<li>Main memory: RAM, ...</li>
<li>Secondary memory: disks, ...</li>
<li>Volatile/non-volatile memory: whether the stored data persists when the electricity power is cut off. RAM is volatile and disk is non-volatile.</li>
</ul></li>
<li><p>The most basic memory element: Register:</p>
<ul>
<li>Put multiple 1-bit register together to form a multi-bit register, the word size may be 16-bit, 32-bit, 64-bit</li>
<li>State: the value that is currently stored in the register</li>
<li>From the output of the register, one can know the state of the register: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">To set register state &#x3D; v:</span><br><span class="line">set in[t] &#x3D; v,</span><br><span class="line">set load[t] &#x3D; 1.</span><br><span class="line">      </span><br><span class="line">Then,</span><br><span class="line">state[t + k] &#x3D; v, </span><br><span class="line">out[t + k] &#x3D; v, for any k unless a new load is set to 1.</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>RAM unit:</p>
<ul>
<li>RAM Unit: <img src="/images/Nand/RAMUnit.png"></li>
<li>RAM(random access memory): irrespective of the RAM size, every register can be accessed at the same instantaneous time</li>
<li>RAM abstraction: a sequence of n addressable registers, with addresses 0 to n-1</li>
<li>At any given point of time, only one register is the RAM is selected</li>
<li>Width of address input k: <span class="math inline">\(k = log_2n\)</span>. Though I think <span class="math inline">\(k = [log_2n] + 1\)</span> here is better.</li>
<li>Width of word: No impact on the RAM logic. For Hack computer, <span class="math inline">\(w = 16\)</span>.</li>
<li>RAM is a sequential chip, with a clocked behavior</li>
</ul></li>
<li><p>Steps for RAM Read Logic:</p>
<ul>
<li>Set <code>address = k</code></li>
<li>Read the out of the register unit, then we can know the state of the selected kth register</li>
</ul></li>
<li><p>Steps for RAM Write Logic:</p>
<ul>
<li>Set <code>address = k</code></li>
<li>Set <code>in = v</code></li>
<li>Set <code>load = 1</code></li>
<li>The the state of the register becomes v and from the next cycle onward, <code>out = v</code> for the RAM unit</li>
</ul></li>
<li><p>A family of 16-bit RAM chips:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">chip name</th>
<th style="text-align: center;">n</th>
<th style="text-align: center;">k</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">RAM8</td>
<td style="text-align: center;">8</td>
<td style="text-align: center;">3</td>
</tr>
<tr class="even">
<td style="text-align: center;">RAM64</td>
<td style="text-align: center;">64</td>
<td style="text-align: center;">6</td>
</tr>
<tr class="odd">
<td style="text-align: center;">RAM512</td>
<td style="text-align: center;">512</td>
<td style="text-align: center;">9</td>
</tr>
<tr class="even">
<td style="text-align: center;">RAM4K</td>
<td style="text-align: center;">4096</td>
<td style="text-align: center;">12</td>
</tr>
<tr class="odd">
<td style="text-align: center;">RAM16K</td>
<td style="text-align: center;">16384</td>
<td style="text-align: center;">14</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>Counters
<ul>
<li>The computer must keep track of which instruction should be fetched and executed next, this control mechanism can be realized using a program counter. The PC contains the address of the instruction that will be fetched and executed next.</li>
<li>Three possible control settings:
<ul>
<li>Reset: fetch the first instruction <code>PC = 0</code></li>
<li>Next: fetch the next instruction <code>PC++</code></li>
<li>Goto: fetch instruction n</li>
</ul></li>
<li>Counter abstraction:
<ul>
<li>Program Counter: <img src="/images/Nand/ProgramCounter.png"></li>
<li>If <code>reset[t] == 1</code>, <code>out[t + 1] = 0</code>, resets counter to 0</li>
<li>If <code>load[t] == 1</code>, <code>out[t + 1] = in[t]</code>, sets counter = value</li>
<li>If <code>inc[t] == 1</code>, <code>out[t + 1] = out[t] + 1</code>, increments counter by 1</li>
<li>Else <code>out[t + 1] = out[t]</code>, nothing changes</li>
</ul></li>
</ul></li>
<li>Project 3 <img src="/images/Nand/Project3.png"></li>
</ol>
<h1 id="week-4">Week 4</h1>
<ol type="1">
<li>Machine Languages: Overview
<ul>
<li>Theoretical universal turing machine: one machine can do many tasks. Actual general computing machine: von Neumann Architecture</li>
<li>Compilation: high-level language =&gt; Compiler =&gt; machine language =&gt; CPU</li>
<li>Assembler can translate assembly language into machine language</li>
</ul></li>
<li>Machine Languages: Elements
<ul>
<li>Machine language specifies the hardware/software interface, it's usually in close correspondence to actual hardware architecture, and as is often the case, the more operations supported by a machine language, the more sophisticated the machine language is</li>
<li>Machine Operations:
<ul>
<li>Arithmetic operations: add, subtract, ...</li>
<li>Logical operations: and, or, ...</li>
<li>Flow control: goto, if then goto, ...</li>
</ul></li>
<li>Addressing:
<ul>
<li>Accessing a memory location is expensive, because it needs to supply a long address and getting the memory contents into the CPU also takes time</li>
<li>Solution to the above problem is memory hierarchy: register =&gt; cache =&gt; main memory =&gt; disk. The closer to CPU, the smaller in size of the memory.</li>
<li>Data Registers: Add R1, R2; Address Registers: Store R1, <span class="citation" data-cites="A">@A</span></li>
<li>Addressing modes: register, direct, indirect, immediate</li>
</ul></li>
<li>Input/Output:
<ul>
<li>Devices: keyboard, mouse, camera, sensor, printer, screen, ...</li>
<li>CPU needs protocol to talk to them. Software drivers know the protocols. An general method of interaction uses memory mapping</li>
</ul></li>
<li>Flow Control:
<ul>
<li>Usually CPU executes machine instructions in sequence, sometimes we need jump to somewhere. There is both unconditional jump and conditional jump.</li>
</ul></li>
</ul></li>
<li>The Hack Computer and Machine Language
<ul>
<li>Hack Computer Hardware:
<ul>
<li>Data memory(RAM): a sequence of 16-bit registers</li>
<li>Instruction memory(ROM): a sequence of 16-bit registers</li>
<li>Central Processing Unit(CPU): performs 16-bit instructions</li>
<li>Instruction bus/data bus/address buses</li>
</ul></li>
<li>Hack Computer Software:
<ul>
<li>Hack machine language:16-bit A-instructions, 16-bit C-instructions</li>
<li>Hack program: sequence of instructions written in the Hack machine language</li>
</ul></li>
<li>Control:
<ul>
<li>The ROM is loaded with a Hack program</li>
<li>The reset button is pushed</li>
<li>The program starts running</li>
</ul></li>
<li>Registers:
<ul>
<li>D register in CPU: holds a 16-bit value of data</li>
<li>A register in CPU: holds a 16-bit value of data or address</li>
<li>M register in RAM: represents the 16-bit RAM register addressed by A, <code>M = RAM[A]</code></li>
</ul></li>
<li>The A-instruction:
<ul>
<li>Syntax: <code>@value</code>, a value is a non-negative decimal constant or a symbol referring to such a constant</li>
<li>Meaning: sets the A register to value, <code>RAM[A]</code> becomes the selected RAM register M</li>
</ul></li>
<li>The C-instruction:
<ul>
<li><code>dest = comp; jump</code> (both dest and jump are optional) <img src="/images/Nand/Comp.png"> <img src="/images/Nand/Dest.png"> <img src="/images/Nand/Jump.png"></li>
<li>Meaning: computes the value of <code>comp</code>, stores the result in <code>dest</code>, if the boolean expression <code>(comp jump 0)</code> is true, jumps to execute the instruction stored in <code>ROM[A]</code> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Set the D register to -1</span><br><span class="line">D &#x3D; -1</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;Set RAM[300] to the value of the D register minus 1</span><br><span class="line">@300            &#x2F;&#x2F;A &#x3D; 300</span><br><span class="line">M &#x3D; D - 1      &#x2F;&#x2F; R[300] &#x3D; D - 1</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; If (D - 1 &#x3D;&#x3D; 0) jump to execute the instruction stored in ROM[56]</span><br><span class="line">@56             &#x2F;&#x2F;A &#x3D; 56</span><br><span class="line">D - 1;JEQ       &#x2F;&#x2F;if(D - 1 &#x3D;&#x3D; 0) goto 56</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Hack Language Specification
<ul>
<li>Two ways to express the same expression:
<ul>
<li>Binary code</li>
<li>Symbolic language</li>
</ul></li>
<li>The A-instruction:
<ul>
<li>Symbolic syntax: <code>@ value</code>, value is a non-negative decimal constant <span class="math inline">\(\leq 2^{15} - 1\)</span> or a symbol referring to such a constant</li>
<li>Binary syntax: <code>0 value</code>, value is a 15-bit binary number</li>
</ul></li>
<li>The C-instruction:
<ul>
<li>Symbolic syntax: <code>dest = comp; jump</code></li>
<li>Binary syntax: <code>1 1 1 a c1 c2 c3 c4 c5 c6 d1 d2 d3 j1 j2 j3</code>
<ul>
<li>The first <code>1</code>: the op code for c-instruction</li>
<li>The second and third <code>1</code>: not used</li>
<li><code>a c1 c2 c3 c4 c5 c6</code>: comp bits</li>
<li><code>d1 d2 d3</code>: dest bits</li>
<li><code>j1 j2 j3</code>: jump bits</li>
</ul></li>
</ul>
<img src="/images/Nand/C-InstructionBinary.png"></li>
</ul></li>
<li>Input/Output
<ul>
<li>Peripheral I/O devices:
<ul>
<li>Keyboard: used to enter inputs</li>
<li>Screen: used to display outputs</li>
</ul></li>
<li>High-level approach: sophisticated software libraries enabling text, graphics, animation, audio, video, etc.</li>
<li>Low-level: bits</li>
<li>Output Using Screen Memory Map:
<ul>
<li>A screen memory map is a designated memory area in RAM, it's dedicated to manage a display unit. The physical unit is refreshed many times per second.</li>
<li>The screen memory map is a sequence of 16-bit values(each value is called a word) with length of 8192. And the display unit is a 256 by 512(b/w) table, each element is a pixel that can be turned on or off. So each bit is matched with a pixel. (<span class="math inline">\(16 * 8192 = 256 * 512\)</span>). Each 32 rows in the screen memory map is mapped to one row in the physical display unit. ($16 * 32 = 512 $)</li>
<li>Set the <code>(row, col)</code> pixel on/off:
<ul>
<li>Find the word: the word should be at <code>32 * row + col /16</code>(here / is integer division) in the memory map. If the first word(indexed with 0) is at <code>RAM[n]</code>, the the target word is at <code>RAM[n + 32 * row + col / 16]</code>.</li>
<li>Find the bit: in the word, the bit is at <code>col % 16</code>, set the bit to 0/1.</li>
<li>Commit the change to RAM</li>
</ul></li>
</ul></li>
<li>Input Using Keyboard Memory Map:
<ul>
<li>A keyboard memory map is a single 16-bit register called keyboard in RAM, it can manage a physical keyboard.</li>
<li>When a key is pressed, its scan code appears in the keyboard memory map as a 16-bit value.</li>
<li>Check which key is currently pressed:
<ul>
<li>Probe the contents of the keyboard chip.</li>
<li>In the Hack computer, probe the contents of <code>RAM[24576]</code>. If the register contains 0, no key is pressed at present.</li>
</ul></li>
</ul></li>
</ul></li>
</ol>
<p><img src="/images/Nand/KeyboardMemoryMap.png"></p>
<ol start="6" type="1">
<li>Hack Programming
<ul>
<li>Working with registers and memory
<ul>
<li>Basics: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; D &#x3D; 10</span><br><span class="line">@ 10                  &#x2F;&#x2F; Set A to 10</span><br><span class="line">D &#x3D; A</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; D ++</span><br><span class="line">D &#x3D; D + 1</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; D &#x3D; RAM[17]</span><br><span class="line">@ 17                 &#x2F;&#x2F; Select the register at RAM[17]</span><br><span class="line">D &#x3D; M</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; RAM[17] &#x3D; D</span><br><span class="line">@ 17</span><br><span class="line">M &#x3D; D</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; RAM[17] &#x3D; 10    </span><br><span class="line">@ 10                </span><br><span class="line">D &#x3D; A                &#x2F;&#x2F; Acquire the constant and store into D                 </span><br><span class="line">@ 17</span><br><span class="line">M &#x3D; D</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; RAM[5] &#x3D; RAM[3]</span><br><span class="line">@ 3</span><br><span class="line">D &#x3D; M              &#x2F;&#x2F; Acquire the value and store into D</span><br><span class="line">@ 5</span><br><span class="line">M &#x3D; D</span><br></pre></td></tr></table></figure></li>
<li>Example : add two numbers <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; RAM[2] &#x3D; RAM[0] + RAM[1]</span><br><span class="line">@ 0</span><br><span class="line">D &#x3D; M       &#x2F;&#x2F; D &#x3D; RAM[0]</span><br><span class="line">@ 1</span><br><span class="line">D &#x3D; D + M   &#x2F;&#x2F; D &#x3D; D + RAM[1]</span><br><span class="line">@ 2</span><br><span class="line">M &#x3D; D       &#x2F;&#x2F; RAM[2] &#x3D; D</span><br></pre></td></tr></table></figure></li>
<li>Terminate a program properly
<ul>
<li>The above program is not safe, because it doesn't end properly. Someone could add malicious code after the above code to do something bad or dangerous, this is called NOP slide. NOP slide is a sequence of NOP(non-operational) instructions intended to slide the CPU's instruction execution flow to its final, desired destination whenever the program branches to a memory address anywhere on the slide.</li>
<li>One can add an infinite loop to end a program: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">@ value</span><br><span class="line">0; JMP</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>Built-in symbols:
<ul>
<li>Symbol <code>Rn</code> has value <code>n</code> for n in 0, ... ,15. Use these symbols rather than numbers when referring the first 16 registers in your code so it's more readable.</li>
<li><code>SCREEN</code> has value 16384, used for screen output</li>
<li><code>KBD</code> has value 24576, used for keyboard input</li>
<li><code>SP</code> has value 0</li>
<li><code>LCL</code> has value 1</li>
<li><code>ARG</code> has value 2</li>
<li><code>THIS</code> has value 3</li>
<li><code>THAT</code> has value 4</li>
</ul></li>
</ul></li>
<li>Branching
<ul>
<li>Definition: evaluate a boolean expression and go to different sections afterwards based on the result. There is only one branching apparatus in machine language called goto.</li>
<li>Example:
<ul>
<li>Original code: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; if R0 &gt; 0</span><br><span class="line">      R1 &#x3D; 1</span><br><span class="line">  else</span><br><span class="line">      R1 &#x3D; 0</span><br><span class="line"></span><br><span class="line">@ R0</span><br><span class="line">D &#x3D; M    &#x2F;&#x2F; D &#x3D; RAM[0]</span><br><span class="line"></span><br><span class="line">@ 17</span><br><span class="line">D; JET   &#x2F;&#x2F; if R0 &gt; 0, goto 17</span><br><span class="line"></span><br><span class="line">@ R1</span><br><span class="line">M &#x3D; 0    &#x2F;&#x2F; R[1] &#x3D; 0</span><br><span class="line">@ 19</span><br><span class="line">0; JMP   &#x2F;&#x2F; end of program</span><br><span class="line"></span><br><span class="line">@ R1</span><br><span class="line">M &#x3D; 1   &#x2F;&#x2F; R[1] &#x3D; 1</span><br><span class="line">@ 19</span><br><span class="line">0; JMP  &#x2F;&#x2F; end of program</span><br></pre></td></tr></table></figure></li>
<li>Labeled code: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; if R0 &gt; 0</span><br><span class="line">      R1 &#x3D; 1</span><br><span class="line">  else</span><br><span class="line">      R1 &#x3D; 0</span><br><span class="line"></span><br><span class="line">@ R0</span><br><span class="line">D &#x3D; M    </span><br><span class="line"></span><br><span class="line">@ POSITIVE          &#x2F;&#x2F; Use a label, it equals to @ n, n is the instruction number following the (label) declaration. Here equals to @ 18</span><br><span class="line">D; JET   </span><br><span class="line"></span><br><span class="line">@ R1</span><br><span class="line">M &#x3D; 0              &#x2F;&#x2F; R[1] &#x3D; 0</span><br><span class="line">@ END              &#x2F;&#x2F; Use a label, here equals to @ 22</span><br><span class="line">0; JMP   </span><br><span class="line"></span><br><span class="line">(POSITIVE)         &#x2F;&#x2F; Declare a label, label declaration is not translated into machine code, it&#39;s like a placeholder</span><br><span class="line">@ R1</span><br><span class="line">M &#x3D; 1</span><br><span class="line">          </span><br><span class="line">(END)</span><br><span class="line">@ END</span><br><span class="line">0; JMP</span><br><span class="line">       </span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
<li>Variables
<ul>
<li>A variable is a container that has a name and a value. In hack language, there is only one variable type, the 16-bit values.</li>
<li>Example <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Exchange the values of RAM[0] and RAM[1]</span><br><span class="line">&#x2F;&#x2F; temp &#x3D; R1</span><br><span class="line">&#x2F;&#x2F; R1 &#x3D; R0</span><br><span class="line">&#x2F;&#x2F; R0 &#x3D; temp</span><br><span class="line"></span><br><span class="line">@ R1</span><br><span class="line">D &#x3D; M</span><br><span class="line">@ temp  &#x2F;&#x2F; Find an available memory register(say register n), use it to represent the variable temp. From now on, @ temp equals to @ n.</span><br><span class="line">M &#x3D; D</span><br><span class="line"></span><br><span class="line">@ R0</span><br><span class="line">D &#x3D; M</span><br><span class="line">@ R1</span><br><span class="line">M &#x3D; D</span><br><span class="line"></span><br><span class="line">@ temp</span><br><span class="line">D &#x3D; M</span><br><span class="line">@ R0</span><br><span class="line">M &#x3D; D</span><br><span class="line"></span><br><span class="line">(END)</span><br><span class="line">@ END</span><br><span class="line">0; JMP</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li>Iteration
<ul>
<li>Example: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; Computer RAM[1] &#x3D; 1 + 2 + ... + n</span><br><span class="line">&#x2F;&#x2F; Put a number (n) in RAM[0]</span><br><span class="line">    @ R0</span><br><span class="line">    D &#x3D; M</span><br><span class="line">    @ n</span><br><span class="line">    M &#x3D; D         &#x2F;&#x2F;n &#x3D; R0</span><br><span class="line">    @ i</span><br><span class="line">    M &#x3D; 1         &#x2F;&#x2F; i &#x3D; 1</span><br><span class="line">    @ sum</span><br><span class="line">    M &#x3D; 0         &#x2F;&#x2F; sum &#x3D; 0</span><br><span class="line"></span><br><span class="line">    (LOOP)</span><br><span class="line">    @ i</span><br><span class="line">    D &#x3D; M</span><br><span class="line">    @ n</span><br><span class="line">    D &#x3D; D - M</span><br><span class="line">    @STOP</span><br><span class="line">    D; JGT       &#x2F;&#x2F; if i &gt; n goto STOP</span><br><span class="line"></span><br><span class="line">    @ sum</span><br><span class="line">    D &#x3D; M</span><br><span class="line">    @ i</span><br><span class="line">    D &#x3D; D + M</span><br><span class="line">    @ sum</span><br><span class="line">    M &#x3D; D       &#x2F;&#x2F; sum &#x3D; sum + i</span><br><span class="line">    @ i</span><br><span class="line">    M &#x3D; M + 1   &#x2F;&#x2F; i &#x3D; i + 1</span><br><span class="line">    @ LOOP</span><br><span class="line">    0; JMP</span><br><span class="line"></span><br><span class="line">    (STOP)</span><br><span class="line">    @ sum</span><br><span class="line">    D &#x3D; M</span><br><span class="line">    @ R1</span><br><span class="line">    M &#x3D; D       &#x2F;&#x2F; RAM[1] &#x3D; sum</span><br><span class="line"></span><br><span class="line">    (END)</span><br><span class="line">    @ END</span><br><span class="line">    0; JMP</span><br></pre></td></tr></table></figure></li>
<li>Best practices:
<ul>
<li>Design your program using pseudo code</li>
<li>Write the program in an assembly language</li>
<li>Test the program using a variable-value trace table</li>
</ul></li>
</ul></li>
<li>Pointers
<ul>
<li>For an array, memory stores its start address and the length</li>
<li>Variables that store memory addresses are called pointers</li>
<li>Hack pointer logic: whenever we have to access memory using a pointer, we need an instruction like <code>A = M</code>, which sets the address register to the content of a memory register</li>
</ul></li>
<li>Input/Output
<ul>
<li>Hack RAM:
<ul>
<li>0-16383: 16k data memory</li>
<li>16384-24575: 8k screen memory map</li>
<li>26576: keyboard</li>
</ul></li>
</ul></li>
</ul></li>
<li>Project 4 <img src="/images/Nand/Project4.png"></li>
</ol>
<h1 id="week-5">Week 5</h1>
<ol type="1">
<li>Von Neumann Architecture
<ul>
<li>The architecture:
<ul>
<li>CPU: ALU, registers</li>
<li>Memory: data memory, program memory</li>
<li>Wire/bus: data wires, address wires, control wires</li>
</ul></li>
<li>ALU wires:
<ul>
<li>Data wires: get data and output data</li>
<li>Control wires: get executions and tell other parts what to do</li>
</ul></li>
<li>Register wires:
<ul>
<li>Data wires: get dat and output data</li>
<li>Address wires: some registers can specify addresses</li>
</ul></li>
<li>Memory wires:
<ul>
<li>Address wires: specify memory addresses</li>
<li>Data wires: input and output data</li>
<li>Control wires: interact with executions in the program memory</li>
</ul></li>
</ul></li>
<li>The Fetch-Execute Cycle
<ul>
<li>Fetch: fetch an instruction from the program memory
<ul>
<li>Put the location of the next instruction into the address of the memory using program counter</li>
<li>Get the instruction code itself by reading the memory contents at the location</li>
</ul></li>
<li>Execute: execute the instruction from the fetch part
<ul>
<li>Put the instruction bits into control wires and tell other parts what to do</li>
<li>Executing procedure also involves accessing data memory</li>
</ul></li>
<li>A problem: in the fetch process, we need to put into the memory the instruction, but in the execute process, we need to put into the memory the data. If there is only one memory for both data and program, in order to avoid the clash, we need to use a multiplexer. <img src="/images/Nand/FetchExecuteMultiplexer.png"></li>
<li>Simpler solution: Harvard Architecture
<ul>
<li>A variant of Von Neumann Architecture</li>
<li>Keep program and data in two separate memory modules so complication is avoided</li>
</ul></li>
</ul></li>
<li>Central Processing Unit
<ul>
<li>The abstraction: a 16-bit processor, designed to execute the current instruction and figure out which instruction to execute next</li>
<li>Hack CPU interface:
<ul>
<li>Inputs: data value, instruction, reset bit</li>
<li>Outputs: data value, data value write memory address(where to write), load bit(write to memory, yes or no), pc(address of next instruction)</li>
</ul></li>
<li>Hack CPU implementation <img src="/images/Nand/HackCPU.png"></li>
<li>Instruction handling:
<ul>
<li>Handling A instruction: <img src="/images/Nand/AInstructionHandling.png">
<ul>
<li>Decodes the instruction into op-code + 15-bit value</li>
<li>Stores the value in the A register</li>
<li>Outputs the value</li>
</ul></li>
<li>Handling C instruction: <img src="/images/Nand/CInstructionHandling.png">
<ul>
<li>Decodes the instruction into Op-code, ALU control bits, Destination load bits and Jump bits</li>
<li>Use the different fields in later steps</li>
</ul></li>
</ul></li>
<li>ALU operations: <img src="/images/Nand/ALUOperation.png">
<ul>
<li>Data inputs: from the D register , from the A register/M register</li>
<li>Control inputs: control bits from the instruction</li>
<li>ALU data outputs: result of ALU calculation, fed simultaneously to D register, A register and M register. The three destination bits determine which register actually receive the incoming value.</li>
</ul></li>
<li>Control: <img src="/images/Nand/Control.png">
<ul>
<li>Reset is used to start a loaded program<br>
</li>
<li>PC:
<ul>
<li>Emits the address of the next instruction.</li>
<li>To start/restart the program's execution: <code>PC = 0</code>.</li>
<li>No jump: <code>PC++</code></li>
<li>Goto: <code>PC = A</code></li>
<li>Conditional goto: <code>if true then PC = A else PC++</code></li>
<li>PC logic: <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if (reset &#x3D;&#x3D; 1) &#123;</span><br><span class="line">  PC &#x3D; 0;</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  &#x2F;&#x2F; current instruction code</span><br><span class="line">  load &#x3D; f(jump bits, ALU control outputs);</span><br><span class="line">  if (load &#x3D;&#x3D; 1) &#123;</span><br><span class="line">    PC &#x3D; A;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    PC ++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
</ul></li>
<li>The Hack Computer
<ul>
<li>Abstraction: it's a computer that is capable of running programs written in the Hack machine language. It's built upon the Hack chip set.</li>
<li>Hack CPU operation: executes instruction according to the Hack language specification
<ul>
<li>If includes D and A then read from/write into D register and A register</li>
<li>If include @ x, then x is stored into A register and value is emitted by M register</li>
<li>If RHS includes M, then value is read from M</li>
<li>If LHS includes M, then ALU output is emitted by M</li>
</ul></li>
<li>Data Memory(RAM):
<ul>
<li>Address 0 to 16383 is data memory, RAM is implemented using a 16-bit 16K RAM chip</li>
<li>Address 16384 to 24575 is screen memory map, screen is implemented using a built-in 8K chip featuring a raster display refresh side-effect</li>
<li>Address 24576 is keyboard memory map, keyboard is implemented using a built-in chip featuring a keyboard capture side-effect</li>
</ul></li>
<li>Reset button</li>
<li>Instruction Memory(ROM)
<ul>
<li>Implemented using the ROM32K chip</li>
<li>Run a program on the Hack computer:
<ul>
<li>Load the program into the ROM using plug-and-play ROM chips or using hardware simulation with text-file programs</li>
<li>Press reset button</li>
<li>The program starts running <img src="/images/Nand/HackComputerImplementation.png"></li>
</ul></li>
</ul></li>
</ul></li>
<li>Project 5
<ul>
<li>Hardware Projects: <img src="/images/Nand/HardwareProjects.png"></li>
</ul></li>
</ol>
<h1 id="week-6">Week 6</h1>
<ol type="1">
<li>Assembly Languages and Assemblers
<ul>
<li>Assembly language program =&gt; Assembler =&gt; Machine language program =&gt; Hack computer</li>
<li>Basic assembler logic:
<ul>
<li>Repeat:
<ul>
<li>Read the next assembly language command, i.e., read next line ignoring whitespace</li>
<li>Break it into the different fields of which it is composed</li>
<li>Lookup the binary code for each field</li>
<li>Combine theses codes into a single machine language command</li>
<li>Output this machine language command</li>
</ul></li>
<li>Until EOF reached</li>
<li>Symbols should be replaced with their addresses in the program, so the assembler needs to maintain a symbol-address table.
<ul>
<li>For a variable, add it to the table if it is not in the label, otherwise simply look it up in the table</li>
<li>For a label, it could use forward reference, which means one can refer to a label before it is declared. There are two ways to deal with forward reference, the first is to leave blank until label declaration appears and then fix; the second is run the program for 2 times, add each label into the table for the first pass, and run other parts for the second pass.</li>
</ul></li>
</ul></li>
</ul></li>
<li>The Hack Assembly Language
<ul>
<li>Language:
<ul>
<li>A-instruction</li>
<li>C-instruction</li>
<li>Symbols</li>
</ul></li>
<li>Assembler:
<ul>
<li>Basic one: translate symbol-less Hack program</li>
<li>Advanced one: able to handle symbols</li>
</ul></li>
</ul></li>
<li>The Assembly Process-Handling Instructions
<ul>
<li>Translating A-instructions <code>@ value</code>
<ul>
<li>If the value is a decimal constant, generate the equivalent 15-bit binary constant</li>
<li>If the value is a symbol, later in the advanced assembler</li>
</ul></li>
<li>Translating C-instructions <code>dest = comp; jump</code>
<ul>
<li>The binary form is simply <code>1 1 1 a c1 c2 c3 c4 c5 c6 d1 d2 d3 j1 j2 j3</code></li>
</ul></li>
<li>The overall assembly logic:
<ul>
<li>For each instruction:
<ul>
<li>Parse the instruction: break it into its underlying fields</li>
<li>A-instruction: translate the decimal value into a binary value</li>
<li>C-instruction: for each field in the instruction, generate the corresponding binary code</li>
<li>Assemble the translated binary codes into a complete 16-bit machine instruction</li>
<li>Write the 16-bit instruction to the output file</li>
</ul></li>
</ul></li>
</ul></li>
<li>The Assembly Processing-Handling Symbols
<ul>
<li>Symbols:
<ul>
<li>Variable symbols: represent memory locations where the programmer wants to maintain values</li>
<li>Label symbols: represent destinations of goto instructions</li>
<li>Pre-defined symbols: represent special memory locations</li>
</ul></li>
<li>Pre-defined symbols:
<ul>
<li>Hack language has 23 pre-defined symbols that are only used in A-instructions</li>
<li>Simply replace the symbols with is values</li>
</ul></li>
<li>Label Symbols:
<ul>
<li>Replace the symbols with the address next to is declaration</li>
</ul></li>
<li>Variable Symbols:
<ul>
<li>A symbol that is not a pre-defined symbol and not a label is called a variable, each variable is assigned with a unique memory address</li>
<li>If a variable appears for the first time, assign a unique memory address for it. If not, replace it with the assigned memory address</li>
</ul></li>
<li>Symbol Table:
<ul>
<li>Create an empty symbol table, and add all pre-defined symbols into the table</li>
<li>Scan the whole program, this procedure is called the first pass. Add all labels into the table during the process</li>
<li>Scan the whole program again, and add all variable symbols</li>
<li>To resolve a symbol, look up its value in the symbol table</li>
</ul></li>
<li>The Assembly Process:
<ul>
<li>Initialization：
<ul>
<li>Construct an empty symbol table</li>
<li>Add the pre-defined symbols to the symbol table</li>
</ul></li>
<li>First pass:
<ul>
<li>Scan the program</li>
<li>For each instruction of the form <code>(XXX)</code>, add the pair <code>(xxx, address)</code> to the symbol table, where the address is the number of the instruction following <code>(XXX)</code></li>
</ul></li>
<li>Second pass:
<ul>
<li>Scan the program</li>
<li>For A-instruction <code>@ symbol</code>, if the <code>(symbol, value)</code> is found, replace symbol with value. If not, add <code>(symbol, address)</code> to the symbol table, use address in instruction's translation, check next instruction</li>
<li>For C-instruction, replace it with the translation</li>
<li>Write the translated instruction into the output file</li>
</ul></li>
</ul></li>
</ul></li>
<li>Developing a Hack Assembler
<ul>
<li>Sub-tasks that need to be done:
<ul>
<li>Reading and parsing commands</li>
<li>Converting mnemonics to code</li>
<li>Handling symbols using the symbol table</li>
</ul></li>
<li>Reading and parsing commands
<ul>
<li>Start reading a file with given name
<ul>
<li>Constructor for a Parser object that accepts a string specifying a file name</li>
<li>Need to know how to read text files</li>
</ul></li>
<li>Move to the next command in the file
<ul>
<li>Detect if there are more instructions</li>
<li>Get the next command</li>
<li>Need to read one line at a time</li>
<li>Need to skip whitespace including comments</li>
</ul></li>
<li>Get the fields of the current command
<ul>
<li>Know the type of the current command</li>
<li>Easy access to the fields</li>
</ul></li>
</ul></li>
<li>Translating Mnemonic to code
<ul>
<li>The way to translate A-instruction, C-instruction and symbols into binary code has already been discussed earlier</li>
</ul></li>
<li>The symbol table
<ul>
<li>The symbol translating has already been discussed earlier</li>
</ul></li>
</ul></li>
<li>Project 6
<ul>
<li>The Hack Assembler
<ul>
<li>Contract:
<ul>
<li>HackAssembler: translates Hack assembly program into executable Hack binary code</li>
<li>Source program is in a text file named <code>xxx.asm</code></li>
<li>Generated code is written into a text file named <code>xxx.hack</code></li>
<li>Assumption: <code>xxx.asm</code> is error-free</li>
</ul></li>
<li>Usage:
<ul>
<li><code>java HackAssembler xxx.asm</code></li>
<li>The above command should create <code>xxx.hack</code> file</li>
</ul></li>
<li>Software architecture
<ul>
<li>Parser: unpacks each instruction into its underlying fields</li>
<li>Code: translates each field into its corresponding binary value</li>
<li>SymbolTable: manages the symbol table</li>
<li>Main: initializes the I/O files and drives the process</li>
</ul></li>
<li>Staged development
<ul>
<li>Develop a basic assembler that translates assembly programs without symbols</li>
<li>Develop an ability to handle symbols</li>
<li>Morph the basic assembler into an assembler that can translate any assembly program</li>
</ul></li>
</ul></li>
<li>Non programming option:
<ul>
<li>Translate the <code>xxx.asm</code> into <code>xxx.hack</code> by hand</li>
</ul></li>
</ul></li>
</ol>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Yanxuanshaozhu
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://yanxuanshaozhu.github.io/2021/04/03/Build%20a%20Modern%20Computer%20from%20First%20Principles%20Part%20One%20Notes/" title="Build a Modern Computer from First Principles Part One Notes">https://yanxuanshaozhu.github.io/2021/04/03/Build a Modern Computer from First Principles Part One Notes/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Build-a-Modern-Computer-Part-One/" rel="tag"># Build a Modern Computer Part One</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/03/21/CS61B%20Notes/" rel="prev" title="CS61B Notes">
      <i class="fa fa-chevron-left"></i> CS61B Notes
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/04/16/Princeton%20Algorithms%20Part%20One%20Notes/" rel="next" title="Princeton Algorithms Part One Notes">
      Princeton Algorithms Part One Notes <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#week-1"><span class="nav-number">1.</span> <span class="nav-text">Week 1</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-2"><span class="nav-number">2.</span> <span class="nav-text">Week 2</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-3"><span class="nav-number">3.</span> <span class="nav-text">Week 3</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-4"><span class="nav-number">4.</span> <span class="nav-text">Week 4</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-5"><span class="nav-number">5.</span> <span class="nav-text">Week 5</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#week-6"><span class="nav-number">6.</span> <span class="nav-text">Week 6</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yanxuanshaozhu"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">Yanxuanshaozhu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/yanxuanshaozhu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;yanxuanshaozhu" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:mrlixm.cn@gmail.com" title="E-Mail → mailto:mrlixm.cn@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yanxuanshaozhu</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="Symbols count total">158k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="Reading time total">2:24</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
